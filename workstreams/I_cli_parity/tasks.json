[
  {
    "id": "I1-design-parity-apis",
    "title": "Design builder/request APIs for missing CLI flags and config overrides",
    "description": "Specify how to surface missing CLI flags (`--config`, `--ask-for-approval`, `--sandbox`, `--full-auto`, `--dangerously-bypass-approvals-and-sandbox`, `--cd`, `--local-provider`, `--search`, `--last`, `--all`) and config overrides (including reasoning/verbosity). Decide on builder vs per-request fields, defaults, and compatibility. Research the CLI/config surface (help + CLI_MATRIX) and update this workstream's tasks/kickoffs if scope changes to keep the plan robust/expandable.",
    "dependencies": [],
    "files": [
      "workstreams/I_cli_parity/BRIEF.md",
      "CLI_MATRIX.md",
      "crates/codex/src/lib.rs"
    ],
    "outputs": ["Design note/doc comments committed to repo"],
    "status": "done"
  },
  {
    "id": "I2-implement-flags-config-overrides",
    "title": "Implement missing flags and config override plumbing",
    "description": "Add builder/request fields and command wiring for missing flags and arbitrary config overrides. Wire reasoning/verbosity/summaries setters and generic `--config key=value` overrides. Ensure exec/resume and any other wrapped subcommands apply the new options. Preserve existing defaults.",
    "dependencies": ["I1-design-parity-apis"],
    "files": [
      "crates/codex/src/lib.rs"
    ],
    "tests": ["cargo test -p codex"],
    "status": "done"
  },
  {
    "id": "I3-tests-docs-examples",
    "title": "Add tests and update docs/examples",
    "description": "Add unit tests for new flags/config overrides; verify backward compatibility. Update README, CLI_MATRIX.md references, and EXAMPLES to show new builder fields and usage. Add example snippets where helpful.",
    "dependencies": ["I2-implement-flags-config-overrides"],
    "files": [
      "crates/codex/src/lib.rs",
      "README.md",
      "crates/codex/EXAMPLES.md",
      "crates/codex/examples"
    ],
    "tests": ["cargo test -p codex", "cargo test -p codex --doc", "cargo test -p codex --examples"],
    "status": "done"
  },
  {
    "id": "I4-auth-session-helper",
    "title": "Optional: Auth/session helper",
    "description": "Add a small helper to check login status and trigger login flows (ChatGPT/API key) using app-scoped CODEX_HOME, without mutating caller env. Make it optional if scope/time is tight.",
    "dependencies": ["I2-implement-flags-config-overrides"],
    "files": [
      "crates/codex/src/lib.rs"
    ],
    "tests": ["cargo test -p codex"],
    "status": "done"
  },
  {
    "id": "I5-tbd",
    "title": "Scope next CLI parity/auth follow-ups",
    "description": "Triage remaining gaps after I4. Decide if further CLI parity/auth/session work is needed (docs, examples, API polish, additional flows). If needed, add/clarify next tasks; otherwise mark workstream complete.",
    "dependencies": ["I4-auth-session-helper"],
    "files": [
      "workstreams/I_cli_parity/BRIEF.md",
      "workstreams/I_cli_parity/tasks.json",
      "README.md",
      "crates/codex/src/lib.rs"
    ],
    "status": "done"
  },
  {
    "id": "I6-profile-flag",
    "title": "Add --profile support",
    "description": "Surface the CLI `--profile <CONFIG_PROFILE>` flag in the Rust wrapper (builder/request) and pass through to the Codex CLI. Update docs/tests as needed.",
    "dependencies": ["I4-auth-session-helper"],
    "files": [
      "crates/codex/src/lib.rs",
      "README.md",
      "workstreams/I_cli_parity/BRIEF.md"
    ],
    "tests": ["cargo test -p codex"],
    "status": "done"
  },
  {
    "id": "I7-sandbox-command-design",
    "title": "Design sandbox command wrapper",
    "description": "Map `codex sandbox` (and aliases/subcommands) to the Rust wrapper: options/positional args, platform variants, and post-run script behavior. Decide minimal surface and ergonomics, note limitations, and plan tests/docs.",
    "dependencies": ["I6-profile-flag"],
    "files": [
      "workstreams/I_cli_parity/BRIEF.md",
      "CLI_MATRIX.md",
      "crates/codex/src/lib.rs",
      "README.md"
    ],
    "status": "done"
  },
  {
    "id": "I8-sandbox-command-impl",
    "title": "Implement sandbox command wrapper",
    "description": "Add Rust wrapper support for `codex sandbox` per I7 design: API surface, command wiring (including optional script-on-finish), tests, and docs/examples.",
    "dependencies": ["I7-sandbox-command-design"],
    "files": [
      "crates/codex/src/lib.rs",
      "README.md"
    ],
    "tests": ["cargo test -p codex"],
    "status": "done"
  },
  {
    "id": "I9-sandbox-followups",
    "title": "Sandbox wrap-up and follow-ons",
    "description": "Audit sandbox wrapper behavior across platforms (macOS denial logging, Windows helper expectations), add sample/demo usage, and note any capability gating or post-run gaps before closing the workstream.",
    "dependencies": ["I8-sandbox-command-impl"],
    "files": [
      "crates/codex/src/lib.rs",
      "README.md",
      "CLI_MATRIX.md",
      "crates/codex/examples"
    ],
    "tests": ["cargo test -p codex"],
    "status": "done"
  },
  {
    "id": "I10-app-server-codegen",
    "title": "Wrap app-server codegen utilities",
    "description": "Expose `codex app-server generate-ts` and `generate-json-schema` in the Rust wrapper (API surface + docs/examples) so hosts can refresh app-server protocol bindings programmatically.",
    "dependencies": ["I9-sandbox-followups"],
    "files": [
      "crates/codex/src/lib.rs",
      "README.md",
      "CLI_MATRIX.md",
      "crates/codex/examples"
    ],
    "tests": ["cargo test -p codex"],
    "status": "done"
  },
  {
    "id": "I10b-cli-parity-closeout",
    "title": "CLI parity closeout",
    "description": "Audit CLI parity after the app-server codegen work: confirm docs/CLI_MATRIX/examples match the wrapper, note any remaining gaps/follow-ups, and prepare a brief handoff/next steps.",
    "dependencies": ["I10-app-server-codegen"],
    "files": [
      "workstreams/I_cli_parity/BRIEF.md",
      "workstreams/I_cli_parity/tasks.json",
      "CLI_MATRIX.md",
      "README.md",
      "crates/codex/EXAMPLES.md",
      "crates/codex/src/lib.rs"
    ],
    "tests": ["cargo test -p codex"],
    "status": "done"
  },
  {
    "id": "I11-execpolicy-wrapper",
    "title": "Wrap execpolicy checker",
    "description": "Add a wrapper for `codex execpolicy check` (policy paths, pretty output, command argv) to let hosts validate shell commands against Starlark policies.",
    "dependencies": ["I10-app-server-codegen"],
    "files": [
      "crates/codex/src/lib.rs",
      "README.md",
      "CLI_MATRIX.md"
    ],
    "tests": ["cargo test -p codex"],
    "status": "done"
  },
  {
    "id": "I12-features-subcommand",
    "title": "Wrap features list",
    "description": "Expose the `codex features list` subcommand as a first-class wrapper (JSON/text) alongside existing capability probes; document usage and add tests.",
    "dependencies": ["I11-execpolicy-wrapper"],
    "files": [
      "crates/codex/src/lib.rs",
      "README.md",
      "CLI_MATRIX.md"
    ],
    "tests": ["cargo test -p codex"],
    "status": "done"
  },
  {
    "id": "I13-proxy-uds-wrappers",
    "title": "Wrap responses-api-proxy and stdio-to-uds",
    "description": "Add wrappers for `codex responses-api-proxy` (API keyâ€“injecting proxy) and `codex stdio-to-uds` (stdio relay to UDS), with minimal API surface, docs, and smoke examples.",
    "dependencies": ["I12-features-subcommand"],
    "files": [
      "crates/codex/src/lib.rs",
      "README.md",
      "CLI_MATRIX.md",
      "crates/codex/examples"
    ],
    "tests": ["cargo test -p codex"],
    "status": "done"
  },
  {
    "id": "I14-cli-parity-followups",
    "title": "CLI parity follow-ups",
    "description": "Decide how to address remaining parity gaps: surface CLI `--oss` and top-level `--enable/--disable` toggles beyond sandbox, and wrap or document `codex cloud exec`/shell completion.",
    "dependencies": ["I13-proxy-uds-wrappers"],
    "files": [
      "workstreams/I_cli_parity/BRIEF.md",
      "workstreams/I_cli_parity/tasks.json",
      "CLI_MATRIX.md",
      "README.md",
      "crates/codex/EXAMPLES.md",
      "crates/codex/src/lib.rs"
    ],
    "tests": ["cargo test -p codex"],
    "status": "done"
  },
  {
    "id": "I15-cli-parity-e2e",
    "title": "CLI parity e2e coverage",
    "description": "Add end-to-end coverage against a real Codex CLI binary for critical wrappers (exec/resume/apply/diff, sandbox, codegen/proxy/uds/features/execpolicy) or document why it remains deferred. Build a light harness that can consume a supplied binary path and reuse existing fixtures where possible.",
    "dependencies": ["I14-cli-parity-followups"],
    "files": [
      "workstreams/I_cli_parity/BRIEF.md",
      "workstreams/I_cli_parity/tasks.json",
      "crates/codex/src/lib.rs",
      "crates/codex/tests",
      "crates/codex/examples"
    ],
    "tests": ["cargo test -p codex"],
    "status": "todo"
  }
]
