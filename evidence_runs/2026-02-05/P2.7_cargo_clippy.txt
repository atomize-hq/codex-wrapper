$ cargo clippy --all-targets --all-features -- -D warnings
    Checking codex v0.2.0 (/home/dev/__Active_Code/codex_wrapper_new/crates/codex)
error[E0433]: failed to resolve: use of undeclared type `OsString`
  --> crates/codex/src/mcp/tests_core.rs:12:9
   |
12 |         OsString::from("ARGV_LOG"),
   |         ^^^^^^^^ use of undeclared type `OsString`
   |
help: a struct with a similar name exists
   |
12 -         OsString::from("ARGV_LOG"),
12 +         String::from("ARGV_LOG"),
   |
help: consider importing one of these structs
   |
1  + use crate::OsString;
   |
1  + use std::ffi::OsString;
   |

error[E0433]: failed to resolve: use of undeclared type `OsString`
  --> crates/codex/src/mcp/tests_core.rs:13:9
   |
13 |         OsString::from(log_path.as_os_str()),
   |         ^^^^^^^^ use of undeclared type `OsString`
   |
help: a struct with a similar name exists
   |
13 -         OsString::from(log_path.as_os_str()),
13 +         String::from(log_path.as_os_str()),
   |
help: consider importing one of these structs
   |
1  + use crate::OsString;
   |
1  + use std::ffi::OsString;
   |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `fs`
  --> crates/codex/src/mcp/tests_core.rs:23:31
   |
23 |         if let Ok(contents) = fs::read_to_string(&log_path) {
   |                               ^^ use of unresolved module or unlinked crate `fs`
   |
   = help: if you wanted to use a crate named `fs`, use `cargo add fs` to add it to your `Cargo.toml`
   = note: module `crate::mcp::test_support::fs` exists but is inaccessible
help: consider importing one of these modules
   |
1  + use crate::fs;
   |
1  + use std::fs;
   |
1  + use tokio::fs;
   |

error[E0433]: failed to resolve: use of undeclared type `Duration`
  --> crates/codex/src/mcp/tests_core.rs:27:28
   |
27 |         tokio::time::sleep(Duration::from_millis(5)).await;
   |                            ^^^^^^^^ use of undeclared type `Duration`
   |
help: consider importing one of these structs
   |
1  + use crate::Duration;
   |
1  + use std::time::Duration;
   |
1  + use tokio::time::Duration;
   |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `env`
  --> crates/codex/src/mcp/tests_core.rs:41:5
   |
41 |     env::remove_var(env_key);
   |     ^^^ use of unresolved module or unlinked crate `env`
   |
   = help: if you wanted to use a crate named `env`, use `cargo add env` to add it to your `Cargo.toml`
help: consider importing one of these modules
   |
1  + use crate::env;
   |
1  + use std::env;
   |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
  --> crates/codex/src/mcp/tests_core.rs:43:23
   |
43 |     let mut env_map = BTreeMap::new();
   |                       ^^^^^^^^ use of undeclared type `BTreeMap`
   |
help: consider importing one of these structs
   |
1  + use crate::BTreeMap;
   |
1  + use std::collections::BTreeMap;
   |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `fs`
  --> crates/codex/src/mcp/tests_core.rs:77:22
   |
77 |     let serialized = fs::read_to_string(config_path).expect("read config");
   |                      ^^ use of unresolved module or unlinked crate `fs`
   |
   = help: if you wanted to use a crate named `fs`, use `cargo add fs` to add it to your `Cargo.toml`
   = note: module `crate::mcp::test_support::fs` exists but is inaccessible
help: consider importing one of these modules
   |
1  + use crate::fs;
   |
1  + use std::fs;
   |
1  + use tokio::fs;
   |

error[E0412]: cannot find type `TomlValue` in this scope
  --> crates/codex/src/mcp/tests_core.rs:78:16
   |
78 |     let value: TomlValue = serialized.parse().expect("parse toml");
   |                ^^^^^^^^^ not found in this scope
   |
   = note: enum `crate::mcp::test_support::TomlValue` exists but is inaccessible

error[E0412]: cannot find type `BTreeMap` in this scope
  --> crates/codex/src/mcp/tests_core.rs:81:18
   |
81 |     let decoded: BTreeMap<String, McpServerDefinition> = servers_table
   |                  ^^^^^^^^ not found in this scope
   |
help: consider importing one of these structs
   |
1  + use crate::BTreeMap;
   |
1  + use std::collections::BTreeMap;
   |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `env`
  --> crates/codex/src/mcp/tests_core.rs:93:16
   |
93 |     assert_eq!(env::var(env_key).unwrap(), "secret");
   |                ^^^ use of unresolved module or unlinked crate `env`
   |
   = help: if you wanted to use a crate named `env`, use `cargo add env` to add it to your `Cargo.toml`
help: consider importing one of these modules
   |
1  + use crate::env;
   |
1  + use std::env;
   |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `env`
  --> crates/codex/src/mcp/tests_core.rs:94:5
   |
94 |     env::remove_var(env_key);
   |     ^^^ use of unresolved module or unlinked crate `env`
   |
   = help: if you wanted to use a crate named `env`, use `cargo add env` to add it to your `Cargo.toml`
help: consider importing one of these modules
   |
1  + use crate::env;
   |
1  + use std::env;
   |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `env`
   --> crates/codex/src/mcp/tests_core.rs:101:5
    |
101 |     env::remove_var(env_var);
    |     ^^^ use of unresolved module or unlinked crate `env`
    |
    = help: if you wanted to use a crate named `env`, use `cargo add env` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::env;
    |
1   + use std::env;
    |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
   --> crates/codex/src/mcp/tests_core.rs:113:18
    |
113 |             env: BTreeMap::new(),
    |                  ^^^^^^^^ use of undeclared type `BTreeMap`
    |
help: consider importing one of these structs
    |
1   + use crate::BTreeMap;
    |
1   + use std::collections::BTreeMap;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `env`
   --> crates/codex/src/mcp/tests_core.rs:118:16
    |
118 |     assert_eq!(env::var(env_var).unwrap(), "token-a");
    |                ^^^ use of unresolved module or unlinked crate `env`
    |
    = help: if you wanted to use a crate named `env`, use `cargo add env` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::env;
    |
1   + use std::env;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `env`
   --> crates/codex/src/mcp/tests_core.rs:123:13
    |
123 |     assert!(env::var(env_var).is_err());
    |             ^^^ use of unresolved module or unlinked crate `env`
    |
    = help: if you wanted to use a crate named `env`, use `cargo add env` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::env;
    |
1   + use std::env;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `env`
   --> crates/codex/src/mcp/tests_core.rs:127:16
    |
127 |     assert_eq!(env::var(env_var).unwrap(), "token-b");
    |                ^^^ use of unresolved module or unlinked crate `env`
    |
    = help: if you wanted to use a crate named `env`, use `cargo add env` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::env;
    |
1   + use std::env;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `env`
   --> crates/codex/src/mcp/tests_core.rs:129:5
    |
129 |     env::remove_var(env_var);
    |     ^^^ use of unresolved module or unlinked crate `env`
    |
    = help: if you wanted to use a crate named `env`, use `cargo add env` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::env;
    |
1   + use std::env;
    |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
   --> crates/codex/src/mcp/tests_core.rs:141:18
    |
141 |             env: BTreeMap::new(),
    |                  ^^^^^^^^ use of undeclared type `BTreeMap`
    |
help: consider importing one of these structs
    |
1   + use crate::BTreeMap;
    |
1   + use std::collections::BTreeMap;
    |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
   --> crates/codex/src/mcp/tests_core.rs:151:18
    |
151 |             env: BTreeMap::new(),
    |                  ^^^^^^^^ use of undeclared type `BTreeMap`
    |
help: consider importing one of these structs
    |
1   + use crate::BTreeMap;
    |
1   + use std::collections::BTreeMap;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `fs`
   --> crates/codex/src/mcp/tests_core.rs:163:18
    |
163 |     let config = fs::read_to_string(manager.config_path()).expect("read config");
    |                  ^^ use of unresolved module or unlinked crate `fs`
    |
    = help: if you wanted to use a crate named `fs`, use `cargo add fs` to add it to your `Cargo.toml`
    = note: module `crate::mcp::test_support::fs` exists but is inaccessible
help: consider importing one of these modules
    |
1   + use crate::fs;
    |
1   + use std::fs;
    |
1   + use tokio::fs;
    |

error[E0412]: cannot find type `TomlValue` in this scope
   --> crates/codex/src/mcp/tests_core.rs:164:16
    |
164 |     let value: TomlValue = config.parse().expect("parse config");
    |                ^^^^^^^^^ not found in this scope
    |
    = note: enum `crate::mcp::test_support::TomlValue` exists but is inaccessible

error[E0412]: cannot find type `BTreeMap` in this scope
   --> crates/codex/src/mcp/tests_core.rs:167:18
    |
167 |     let servers: BTreeMap<String, McpServerDefinition> =
    |                  ^^^^^^^^ not found in this scope
    |
help: consider importing one of these structs
    |
1   + use crate::BTreeMap;
    |
1   + use std::collections::BTreeMap;
    |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
   --> crates/codex/src/mcp/tests_core.rs:190:24
    |
190 |     let mut injected = BTreeMap::new();
    |                        ^^^^^^^^ use of undeclared type `BTreeMap`
    |
help: consider importing one of these structs
    |
1   + use crate::BTreeMap;
    |
1   + use std::collections::BTreeMap;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `env`
   --> crates/codex/src/mcp/tests_core.rs:227:5
    |
227 |     env::remove_var("MCP_STDIO_INJECT_E6");
    |     ^^^ use of unresolved module or unlinked crate `env`
    |
    = help: if you wanted to use a crate named `env`, use `cargo add env` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::env;
    |
1   + use std::env;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `env`
   --> crates/codex/src/mcp/tests_core.rs:234:5
    |
234 |     env::set_var(env_var, "token-123");
    |     ^^^ use of unresolved module or unlinked crate `env`
    |
    = help: if you wanted to use a crate named `env`, use `cargo add env` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::env;
    |
1   + use std::env;
    |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
   --> crates/codex/src/mcp/tests_core.rs:248:18
    |
248 |             env: BTreeMap::new(),
    |                  ^^^^^^^^ use of undeclared type `BTreeMap`
    |
help: consider importing one of these structs
    |
1   + use crate::BTreeMap;
    |
1   + use std::collections::BTreeMap;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `env`
   --> crates/codex/src/mcp/tests_core.rs:273:5
    |
273 |     env::remove_var(env_var);
    |     ^^^ use of unresolved module or unlinked crate `env`
    |
    = help: if you wanted to use a crate named `env`, use `cargo add env` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::env;
    |
1   + use std::env;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `env`
   --> crates/codex/src/mcp/tests_core.rs:280:5
    |
280 |     env::set_var(env_var, "token-override");
    |     ^^^ use of unresolved module or unlinked crate `env`
    |
    = help: if you wanted to use a crate named `env`, use `cargo add env` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::env;
    |
1   + use std::env;
    |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
   --> crates/codex/src/mcp/tests_core.rs:293:18
    |
293 |             env: BTreeMap::new(),
    |                  ^^^^^^^^ use of undeclared type `BTreeMap`
    |
help: consider importing one of these structs
    |
1   + use crate::BTreeMap;
    |
1   + use std::collections::BTreeMap;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `env`
   --> crates/codex/src/mcp/tests_core.rs:312:5
    |
312 |     env::remove_var(env_var);
    |     ^^^ use of unresolved module or unlinked crate `env`
    |
    = help: if you wanted to use a crate named `env`, use `cargo add env` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::env;
    |
1   + use std::env;
    |

error[E0433]: failed to resolve: use of undeclared type `PathBuf`
   --> crates/codex/src/mcp/tests_core.rs:321:17
    |
321 |         binary: PathBuf::from("codex"),
    |                 ^^^^^^^ use of undeclared type `PathBuf`
    |
help: consider importing one of these structs
    |
1   + use crate::PathBuf;
    |
1   + use std::path::PathBuf;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_core.rs:325:14
    |
325 |             (OsString::from("BASE_ONLY"), OsString::from("base")),
    |              ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
325 -             (OsString::from("BASE_ONLY"), OsString::from("base")),
325 +             (String::from("BASE_ONLY"), OsString::from("base")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_core.rs:325:43
    |
325 |             (OsString::from("BASE_ONLY"), OsString::from("base")),
    |                                           ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
325 -             (OsString::from("BASE_ONLY"), OsString::from("base")),
325 +             (OsString::from("BASE_ONLY"), String::from("base")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_core.rs:326:14
    |
326 |             (OsString::from("OVERRIDE_ME"), OsString::from("base")),
    |              ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
326 -             (OsString::from("OVERRIDE_ME"), OsString::from("base")),
326 +             (String::from("OVERRIDE_ME"), OsString::from("base")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_core.rs:326:45
    |
326 |             (OsString::from("OVERRIDE_ME"), OsString::from("base")),
    |                                             ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
326 -             (OsString::from("OVERRIDE_ME"), OsString::from("base")),
326 +             (OsString::from("OVERRIDE_ME"), String::from("base")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:330:26
    |
330 |         startup_timeout: Duration::from_secs(5),
    |                          ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
   --> crates/codex/src/mcp/tests_core.rs:336:14
    |
336 |         env: BTreeMap::new(),
    |              ^^^^^^^^ use of undeclared type `BTreeMap`
    |
help: consider importing one of these structs
    |
1   + use crate::BTreeMap;
    |
1   + use std::collections::BTreeMap;
    |

error[E0433]: failed to resolve: use of undeclared type `PathBuf`
   --> crates/codex/src/mcp/tests_core.rs:368:40
    |
368 |             assert_eq!(launch.command, PathBuf::from("my-mcp"));
    |                                        ^^^^^^^ use of undeclared type `PathBuf`
    |
help: consider importing one of these structs
    |
1   + use crate::PathBuf;
    |
1   + use std::path::PathBuf;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:371:40
    |
371 |             assert_eq!(launch.timeout, Duration::from_millis(1500));
    |                                        ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0412]: cannot find type `HashMap` in this scope
   --> crates/codex/src/mcp/tests_core.rs:374:26
    |
374 |             let env_map: HashMap<OsString, OsString> = launch.env.into_iter().collect();
    |                          ^^^^^^^ not found in this scope
    |
    = note: struct `crate::mcp::test_support::HashMap` exists but is inaccessible
help: consider importing this struct
    |
1   + use std::collections::HashMap;
    |

error[E0412]: cannot find type `OsString` in this scope
   --> crates/codex/src/mcp/tests_core.rs:374:34
    |
374 |             let env_map: HashMap<OsString, OsString> = launch.env.into_iter().collect();
    |                                  ^^^^^^^^
   --> /rustc/29483883eed69d5fb4db01964cdf2af4d86e9cb2/library/alloc/src/string.rs:360:1
    |
    = note: similarly named struct `String` defined here
    |
help: a struct with a similar name exists
    |
374 -             let env_map: HashMap<OsString, OsString> = launch.env.into_iter().collect();
374 +             let env_map: HashMap<String, OsString> = launch.env.into_iter().collect();
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0412]: cannot find type `OsString` in this scope
   --> crates/codex/src/mcp/tests_core.rs:374:44
    |
374 |             let env_map: HashMap<OsString, OsString> = launch.env.into_iter().collect();
    |                                            ^^^^^^^^
   --> /rustc/29483883eed69d5fb4db01964cdf2af4d86e9cb2/library/alloc/src/string.rs:360:1
    |
    = note: similarly named struct `String` defined here
    |
help: a struct with a similar name exists
    |
374 -             let env_map: HashMap<OsString, OsString> = launch.env.into_iter().collect();
374 +             let env_map: HashMap<OsString, String> = launch.env.into_iter().collect();
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_core.rs:376:30
    |
376 |                 env_map.get(&OsString::from("BASE_ONLY")),
    |                              ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
376 -                 env_map.get(&OsString::from("BASE_ONLY")),
376 +                 env_map.get(&String::from("BASE_ONLY")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_core.rs:377:23
    |
377 |                 Some(&OsString::from("base"))
    |                       ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
377 -                 Some(&OsString::from("base"))
377 +                 Some(&String::from("base"))
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_core.rs:380:30
    |
380 |                 env_map.get(&OsString::from("OVERRIDE_ME")),
    |                              ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
380 -                 env_map.get(&OsString::from("OVERRIDE_ME")),
380 +                 env_map.get(&String::from("OVERRIDE_ME")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_core.rs:381:23
    |
381 |                 Some(&OsString::from("runtime"))
    |                       ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
381 -                 Some(&OsString::from("runtime"))
381 +                 Some(&String::from("runtime"))
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_core.rs:384:30
    |
384 |                 env_map.get(&OsString::from("RUNTIME_ONLY")),
    |                              ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
384 -                 env_map.get(&OsString::from("RUNTIME_ONLY")),
384 +                 env_map.get(&String::from("RUNTIME_ONLY")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_core.rs:385:23
    |
385 |                 Some(&OsString::from("runtime-env"))
    |                       ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
385 -                 Some(&OsString::from("runtime-env"))
385 +                 Some(&String::from("runtime-env"))
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_core.rs:388:30
    |
388 |                 env_map.get(&OsString::from("CODEX_HOME")),
    |                              ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
388 -                 env_map.get(&OsString::from("CODEX_HOME")),
388 +                 env_map.get(&String::from("CODEX_HOME")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `env`
   --> crates/codex/src/mcp/tests_core.rs:399:5
    |
399 |     env::set_var(env_var, "token-launcher");
    |     ^^^ use of unresolved module or unlinked crate `env`
    |
    = help: if you wanted to use a crate named `env`, use `cargo add env` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::env;
    |
1   + use std::env;
    |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
   --> crates/codex/src/mcp/tests_core.rs:403:18
    |
403 |         headers: BTreeMap::new(),
    |                  ^^^^^^^^ use of undeclared type `BTreeMap`
    |
help: consider importing one of these structs
    |
1   + use crate::BTreeMap;
    |
1   + use std::collections::BTreeMap;
    |

error[E0433]: failed to resolve: use of undeclared type `PathBuf`
   --> crates/codex/src/mcp/tests_core.rs:424:17
    |
424 |         binary: PathBuf::from("codex"),
    |                 ^^^^^^^ use of undeclared type `PathBuf`
    |
help: consider importing one of these structs
    |
1   + use crate::PathBuf;
    |
1   + use std::path::PathBuf;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:430:26
    |
430 |         startup_timeout: Duration::from_secs(2),
    |                          ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:445:56
    |
445 |             assert_eq!(connector.connect_timeout, Some(Duration::from_millis(1200)));
    |                                                        ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:446:56
    |
446 |             assert_eq!(connector.request_timeout, Some(Duration::from_millis(3400)));
    |                                                        ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `env`
   --> crates/codex/src/mcp/tests_core.rs:457:5
    |
457 |     env::remove_var(env_var);
    |     ^^^ use of unresolved module or unlinked crate `env`
    |
    = help: if you wanted to use a crate named `env`, use `cargo add env` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::env;
    |
1   + use std::env;
    |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
   --> crates/codex/src/mcp/tests_core.rs:471:17
    |
471 |         config: BTreeMap::new(),
    |                 ^^^^^^^^ use of undeclared type `BTreeMap`
    |
help: consider importing one of these structs
    |
1   + use crate::BTreeMap;
    |
1   + use std::collections::BTreeMap;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_core.rs:476:23
    |
476 |     let first_event = time::timeout(Duration::from_secs(2), handle.events.recv())
    |                       ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:476:37
    |
476 |     let first_event = time::timeout(Duration::from_secs(2), handle.events.recv())
    |                                     ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_core.rs:488:24
    |
488 |     let second_event = time::timeout(Duration::from_secs(2), handle.events.recv())
    |                        ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:488:38
    |
488 |     let second_event = time::timeout(Duration::from_secs(2), handle.events.recv())
    |                                      ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_core.rs:502:20
    |
502 |     let response = time::timeout(Duration::from_secs(2), handle.response)
    |                    ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:502:34
    |
502 |     let response = time::timeout(Duration::from_secs(2), handle.response)
    |                                  ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
   --> crates/codex/src/mcp/tests_core.rs:527:17
    |
527 |         config: BTreeMap::new(),
    |                 ^^^^^^^^ use of undeclared type `BTreeMap`
    |
help: consider importing one of these structs
    |
1   + use crate::BTreeMap;
    |
1   + use std::collections::BTreeMap;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_core.rs:534:24
    |
534 |     let cancel_event = time::timeout(Duration::from_secs(2), handle.events.recv())
    |                        ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:534:38
    |
534 |     let cancel_event = time::timeout(Duration::from_secs(2), handle.events.recv())
    |                                      ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_core.rs:552:20
    |
552 |     let response = time::timeout(Duration::from_secs(2), handle.response)
    |                    ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:552:34
    |
552 |     let response = time::timeout(Duration::from_secs(2), handle.response)
    |                                  ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
   --> crates/codex/src/mcp/tests_core.rs:572:17
    |
572 |         config: BTreeMap::new(),
    |                 ^^^^^^^^ use of undeclared type `BTreeMap`
    |
help: consider importing one of these structs
    |
1   + use crate::BTreeMap;
    |
1   + use std::collections::BTreeMap;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_core.rs:575:26
    |
575 |     let first_response = time::timeout(Duration::from_secs(2), first.response)
    |                          ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:575:40
    |
575 |     let first_response = time::timeout(Duration::from_secs(2), first.response)
    |                                        ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_core.rs:590:20
    |
590 |     let approval = time::timeout(Duration::from_secs(2), reply.events.recv())
    |                    ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:590:34
    |
590 |     let approval = time::timeout(Duration::from_secs(2), reply.events.recv())
    |                                  ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_core.rs:602:20
    |
602 |     let complete = time::timeout(Duration::from_secs(2), reply.events.recv())
    |                    ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:602:34
    |
602 |     let complete = time::timeout(Duration::from_secs(2), reply.events.recv())
    |                                  ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_core.rs:614:26
    |
614 |     let reply_response = time::timeout(Duration::from_secs(2), reply.response)
    |                          ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:614:40
    |
614 |     let reply_response = time::timeout(Duration::from_secs(2), reply.response)
    |                                        ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of undeclared type `Value`
   --> crates/codex/src/mcp/tests_core.rs:634:19
    |
634 |         metadata: Value::Null,
    |                   ^^^^^ use of undeclared type `Value`
    |
help: consider importing one of these items
    |
1   + use crate::Value;
    |
1   + use serde_json::Value;
    |
1   + use toml::Value;
    |
1   + use tracing::Value;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_core.rs:640:27
    |
640 |     let thread_response = time::timeout(Duration::from_secs(2), thread_handle.response)
    |                           ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:640:41
    |
640 |     let thread_response = time::timeout(Duration::from_secs(2), thread_handle.response)
    |                                         ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of undeclared type `Value`
   --> crates/codex/src/mcp/tests_core.rs:647:19
    |
647 |         .and_then(Value::as_str)
    |                   ^^^^^ use of undeclared type `Value`
    |
help: consider importing one of these items
    |
1   + use crate::Value;
    |
1   + use serde_json::Value;
    |
1   + use toml::Value;
    |
1   + use tracing::Value;
    |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
   --> crates/codex/src/mcp/tests_core.rs:659:17
    |
659 |         config: BTreeMap::new(),
    |                 ^^^^^^^^ use of undeclared type `BTreeMap`
    |
help: consider importing one of these structs
    |
1   + use crate::BTreeMap;
    |
1   + use std::collections::BTreeMap;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_core.rs:663:23
    |
663 |     let first_event = time::timeout(Duration::from_secs(2), handle.events.recv())
    |                       ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:663:37
    |
663 |     let first_event = time::timeout(Duration::from_secs(2), handle.events.recv())
    |                                     ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_core.rs:680:24
    |
680 |     let second_event = time::timeout(Duration::from_secs(2), handle.events.recv())
    |                        ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:680:38
    |
680 |     let second_event = time::timeout(Duration::from_secs(2), handle.events.recv())
    |                                      ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_core.rs:697:20
    |
697 |     let response = time::timeout(Duration::from_secs(2), handle.response)
    |                    ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:697:34
    |
697 |     let response = time::timeout(Duration::from_secs(2), handle.response)
    |                                  ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of undeclared type `Value`
   --> crates/codex/src/mcp/tests_core.rs:705:23
    |
705 |             .and_then(Value::as_str)
    |                       ^^^^^ use of undeclared type `Value`
    |
help: consider importing one of these items
    |
1   + use crate::Value;
    |
1   + use serde_json::Value;
    |
1   + use toml::Value;
    |
1   + use tracing::Value;
    |

error[E0433]: failed to resolve: use of undeclared type `Value`
   --> crates/codex/src/mcp/tests_core.rs:719:19
    |
719 |         metadata: Value::Null,
    |                   ^^^^^ use of undeclared type `Value`
    |
help: consider importing one of these items
    |
1   + use crate::Value;
    |
1   + use serde_json::Value;
    |
1   + use toml::Value;
    |
1   + use tracing::Value;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_core.rs:725:27
    |
725 |     let thread_response = time::timeout(Duration::from_secs(2), thread_handle.response)
    |                           ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:725:41
    |
725 |     let thread_response = time::timeout(Duration::from_secs(2), thread_handle.response)
    |                                         ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of undeclared type `Value`
   --> crates/codex/src/mcp/tests_core.rs:732:19
    |
732 |         .and_then(Value::as_str)
    |                   ^^^^^ use of undeclared type `Value`
    |
help: consider importing one of these items
    |
1   + use crate::Value;
    |
1   + use serde_json::Value;
    |
1   + use toml::Value;
    |
1   + use tracing::Value;
    |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
   --> crates/codex/src/mcp/tests_core.rs:743:17
    |
743 |         config: BTreeMap::new(),
    |                 ^^^^^^^^ use of undeclared type `BTreeMap`
    |
help: consider importing one of these structs
    |
1   + use crate::BTreeMap;
    |
1   + use std::collections::BTreeMap;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_core.rs:749:24
    |
749 |     let cancel_event = time::timeout(Duration::from_secs(2), handle.events.recv())
    |                        ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:749:38
    |
749 |     let cancel_event = time::timeout(Duration::from_secs(2), handle.events.recv())
    |                                      ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of undeclared type `Value`
   --> crates/codex/src/mcp/tests_core.rs:761:55
    |
761 |             assert_eq!(result.get("cancelled"), Some(&Value::Bool(true)));
    |                                                       ^^^^^ use of undeclared type `Value`
    |
help: consider importing one of these items
    |
1   + use crate::Value;
    |
1   + use serde_json::Value;
    |
1   + use toml::Value;
    |
1   + use tracing::Value;
    |

error[E0433]: failed to resolve: use of undeclared type `Value`
   --> crates/codex/src/mcp/tests_core.rs:764:23
    |
764 |                 Some(&Value::String("client_cancel".into()))
    |                       ^^^^^ use of undeclared type `Value`
    |
help: consider importing one of these items
    |
1   + use crate::Value;
    |
1   + use serde_json::Value;
    |
1   + use toml::Value;
    |
1   + use tracing::Value;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_core.rs:770:20
    |
770 |     let response = time::timeout(Duration::from_secs(2), handle.response)
    |                    ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:770:34
    |
770 |     let response = time::timeout(Duration::from_secs(2), handle.response)
    |                                  ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of undeclared type `Value`
   --> crates/codex/src/mcp/tests_core.rs:785:19
    |
785 |         metadata: Value::Null,
    |                   ^^^^^ use of undeclared type `Value`
    |
help: consider importing one of these items
    |
1   + use crate::Value;
    |
1   + use serde_json::Value;
    |
1   + use toml::Value;
    |
1   + use tracing::Value;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_core.rs:791:27
    |
791 |     let thread_response = time::timeout(Duration::from_secs(2), thread_handle.response)
    |                           ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:791:41
    |
791 |     let thread_response = time::timeout(Duration::from_secs(2), thread_handle.response)
    |                                         ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of undeclared type `Value`
   --> crates/codex/src/mcp/tests_core.rs:798:19
    |
798 |         .and_then(Value::as_str)
    |                   ^^^^^ use of undeclared type `Value`
    |
help: consider importing one of these items
    |
1   + use crate::Value;
    |
1   + use serde_json::Value;
    |
1   + use toml::Value;
    |
1   + use tracing::Value;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_core.rs:809:27
    |
809 |     let resume_response = time::timeout(Duration::from_secs(2), resume_handle.response)
    |                           ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:809:41
    |
809 |     let resume_response = time::timeout(Duration::from_secs(2), resume_handle.response)
    |                                         ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of undeclared type `Value`
   --> crates/codex/src/mcp/tests_core.rs:817:23
    |
817 |             .and_then(Value::as_str)
    |                       ^^^^^ use of undeclared type `Value`
    |
help: consider importing one of these items
    |
1   + use crate::Value;
    |
1   + use serde_json::Value;
    |
1   + use toml::Value;
    |
1   + use tracing::Value;
    |

error[E0433]: failed to resolve: use of undeclared type `Value`
   --> crates/codex/src/mcp/tests_core.rs:823:19
    |
823 |         .and_then(Value::as_bool)
    |                   ^^^^^ use of undeclared type `Value`
    |
help: consider importing one of these items
    |
1   + use crate::Value;
    |
1   + use serde_json::Value;
    |
1   + use toml::Value;
    |
1   + use tracing::Value;
    |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
   --> crates/codex/src/mcp/tests_core.rs:833:17
    |
833 |         config: BTreeMap::new(),
    |                 ^^^^^^^^ use of undeclared type `BTreeMap`
    |
help: consider importing one of these structs
    |
1   + use crate::BTreeMap;
    |
1   + use std::collections::BTreeMap;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_core.rs:837:16
    |
837 |     let item = time::timeout(Duration::from_secs(2), turn.events.recv())
    |                ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:837:30
    |
837 |     let item = time::timeout(Duration::from_secs(2), turn.events.recv())
    |                              ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_core.rs:853:20
    |
853 |     let complete = time::timeout(Duration::from_secs(2), turn.events.recv())
    |                    ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:853:34
    |
853 |     let complete = time::timeout(Duration::from_secs(2), turn.events.recv())
    |                                  ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_core.rs:870:25
    |
870 |     let turn_response = time::timeout(Duration::from_secs(2), turn.response)
    |                         ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:870:39
    |
870 |     let turn_response = time::timeout(Duration::from_secs(2), turn.response)
    |                                       ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of undeclared type `Value`
   --> crates/codex/src/mcp/tests_core.rs:878:23
    |
878 |             .and_then(Value::as_str)
    |                       ^^^^^ use of undeclared type `Value`
    |
help: consider importing one of these items
    |
1   + use crate::Value;
    |
1   + use serde_json::Value;
    |
1   + use toml::Value;
    |
1   + use tracing::Value;
    |

error[E0433]: failed to resolve: use of undeclared type `Value`
   --> crates/codex/src/mcp/tests_core.rs:892:19
    |
892 |         metadata: Value::Null,
    |                   ^^^^^ use of undeclared type `Value`
    |
help: consider importing one of these items
    |
1   + use crate::Value;
    |
1   + use serde_json::Value;
    |
1   + use toml::Value;
    |
1   + use tracing::Value;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_core.rs:898:27
    |
898 |     let thread_response = time::timeout(Duration::from_secs(2), thread_handle.response)
    |                           ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:898:41
    |
898 |     let thread_response = time::timeout(Duration::from_secs(2), thread_handle.response)
    |                                         ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of undeclared type `Value`
   --> crates/codex/src/mcp/tests_core.rs:905:19
    |
905 |         .and_then(Value::as_str)
    |                   ^^^^^ use of undeclared type `Value`
    |
help: consider importing one of these items
    |
1   + use crate::Value;
    |
1   + use serde_json::Value;
    |
1   + use toml::Value;
    |
1   + use tracing::Value;
    |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
   --> crates/codex/src/mcp/tests_core.rs:916:17
    |
916 |         config: BTreeMap::new(),
    |                 ^^^^^^^^ use of undeclared type `BTreeMap`
    |
help: consider importing one of these structs
    |
1   + use crate::BTreeMap;
    |
1   + use std::collections::BTreeMap;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_core.rs:920:23
    |
920 |     let first_event = time::timeout(Duration::from_secs(2), turn.events.recv())
    |                       ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:920:37
    |
920 |     let first_event = time::timeout(Duration::from_secs(2), turn.events.recv())
    |                                     ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_core.rs:944:24
    |
944 |     let cancel_event = time::timeout(Duration::from_secs(2), turn.events.recv())
    |                        ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:944:38
    |
944 |     let cancel_event = time::timeout(Duration::from_secs(2), turn.events.recv())
    |                                      ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of undeclared type `Value`
   --> crates/codex/src/mcp/tests_core.rs:956:55
    |
956 |             assert_eq!(result.get("cancelled"), Some(&Value::Bool(true)));
    |                                                       ^^^^^ use of undeclared type `Value`
    |
help: consider importing one of these items
    |
1   + use crate::Value;
    |
1   + use serde_json::Value;
    |
1   + use toml::Value;
    |
1   + use tracing::Value;
    |

error[E0433]: failed to resolve: use of undeclared type `Value`
   --> crates/codex/src/mcp/tests_core.rs:959:23
    |
959 |                 Some(&Value::String("interrupted".into()))
    |                       ^^^^^ use of undeclared type `Value`
    |
help: consider importing one of these items
    |
1   + use crate::Value;
    |
1   + use serde_json::Value;
    |
1   + use toml::Value;
    |
1   + use tracing::Value;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_core.rs:965:25
    |
965 |     let turn_response = time::timeout(Duration::from_secs(2), turn.response)
    |                         ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:965:39
    |
965 |     let turn_response = time::timeout(Duration::from_secs(2), turn.response)
    |                                       ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_core.rs:971:30
    |
971 |     let interrupt_response = time::timeout(Duration::from_secs(2), interrupt.response)
    |                              ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_core.rs:971:44
    |
971 |     let interrupt_response = time::timeout(Duration::from_secs(2), interrupt.response)
    |                                            ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of undeclared type `Value`
   --> crates/codex/src/mcp/tests_core.rs:978:19
    |
978 |         .and_then(Value::as_bool)
    |                   ^^^^^ use of undeclared type `Value`
    |
help: consider importing one of these items
    |
1   + use crate::Value;
    |
1   + use serde_json::Value;
    |
1   + use toml::Value;
    |
1   + use tracing::Value;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `env`
  --> crates/codex/src/mcp/tests_runtime_app.rs:10:5
   |
10 |     env::set_var(http_env_key, "token-api");
   |     ^^^ use of unresolved module or unlinked crate `env`
   |
   = help: if you wanted to use a crate named `env`, use `cargo add env` to add it to your `Cargo.toml`
help: consider importing one of these modules
   |
1  + use crate::env;
   |
1  + use std::env;
   |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
  --> crates/codex/src/mcp/tests_runtime_app.rs:27:23
   |
27 |     let mut env_map = BTreeMap::new();
   |                       ^^^^^^^^ use of undeclared type `BTreeMap`
   |
help: consider importing one of these structs
   |
1  + use crate::BTreeMap;
   |
1  + use std::collections::BTreeMap;
   |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
  --> crates/codex/src/mcp/tests_runtime_app.rs:57:18
   |
57 |             env: BTreeMap::new(),
   |                  ^^^^^^^^ use of undeclared type `BTreeMap`
   |
help: consider importing one of these structs
   |
1  + use crate::BTreeMap;
   |
1  + use std::collections::BTreeMap;
   |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `fs`
  --> crates/codex/src/mcp/tests_runtime_app.rs:62:18
   |
62 |     let before = fs::read_to_string(manager.config_path()).expect("read config before");
   |                  ^^ use of unresolved module or unlinked crate `fs`
   |
   = help: if you wanted to use a crate named `fs`, use `cargo add fs` to add it to your `Cargo.toml`
   = note: module `crate::mcp::test_support::fs` exists but is inaccessible
help: consider importing one of these modules
   |
1  + use crate::fs;
   |
1  + use std::fs;
   |
1  + use tokio::fs;
   |

error[E0433]: failed to resolve: use of undeclared type `PathBuf`
  --> crates/codex/src/mcp/tests_runtime_app.rs:66:17
   |
66 |         binary: PathBuf::from("codex"),
   |                 ^^^^^^^ use of undeclared type `PathBuf`
   |
help: consider importing one of these structs
   |
1  + use crate::PathBuf;
   |
1  + use std::path::PathBuf;
   |

error[E0433]: failed to resolve: use of undeclared type `OsString`
  --> crates/codex/src/mcp/tests_runtime_app.rs:70:14
   |
70 |             (OsString::from("DEFAULT_ONLY"), OsString::from("default")),
   |              ^^^^^^^^ use of undeclared type `OsString`
   |
help: a struct with a similar name exists
   |
70 -             (OsString::from("DEFAULT_ONLY"), OsString::from("default")),
70 +             (String::from("DEFAULT_ONLY"), OsString::from("default")),
   |
help: consider importing one of these structs
   |
1  + use crate::OsString;
   |
1  + use std::ffi::OsString;
   |

error[E0433]: failed to resolve: use of undeclared type `OsString`
  --> crates/codex/src/mcp/tests_runtime_app.rs:70:46
   |
70 |             (OsString::from("DEFAULT_ONLY"), OsString::from("default")),
   |                                              ^^^^^^^^ use of undeclared type `OsString`
   |
help: a struct with a similar name exists
   |
70 -             (OsString::from("DEFAULT_ONLY"), OsString::from("default")),
70 +             (OsString::from("DEFAULT_ONLY"), String::from("default")),
   |
help: consider importing one of these structs
   |
1  + use crate::OsString;
   |
1  + use std::ffi::OsString;
   |

error[E0433]: failed to resolve: use of undeclared type `OsString`
  --> crates/codex/src/mcp/tests_runtime_app.rs:72:17
   |
72 |                 OsString::from(request_env_key),
   |                 ^^^^^^^^ use of undeclared type `OsString`
   |
help: a struct with a similar name exists
   |
72 -                 OsString::from(request_env_key),
72 +                 String::from(request_env_key),
   |
help: consider importing one of these structs
   |
1  + use crate::OsString;
   |
1  + use std::ffi::OsString;
   |

error[E0433]: failed to resolve: use of undeclared type `OsString`
  --> crates/codex/src/mcp/tests_runtime_app.rs:73:17
   |
73 |                 OsString::from("base-default"),
   |                 ^^^^^^^^ use of undeclared type `OsString`
   |
help: a struct with a similar name exists
   |
73 -                 OsString::from("base-default"),
73 +                 String::from("base-default"),
   |
help: consider importing one of these structs
   |
1  + use crate::OsString;
   |
1  + use std::ffi::OsString;
   |

error[E0433]: failed to resolve: use of undeclared type `Duration`
  --> crates/codex/src/mcp/tests_runtime_app.rs:78:26
   |
78 |         startup_timeout: Duration::from_secs(3),
   |                          ^^^^^^^^ use of undeclared type `Duration`
   |
help: consider importing one of these structs
   |
1  + use crate::Duration;
   |
1  + use std::time::Duration;
   |
1  + use tokio::time::Duration;
   |

error[E0433]: failed to resolve: use of undeclared type `Duration`
  --> crates/codex/src/mcp/tests_runtime_app.rs:97:40
   |
97 |     assert_eq!(stdio_launcher.timeout, Duration::from_millis(2400));
   |                                        ^^^^^^^^ use of undeclared type `Duration`
   |
help: consider importing one of these structs
   |
1  + use crate::Duration;
   |
1  + use std::time::Duration;
   |
1  + use tokio::time::Duration;
   |

error[E0412]: cannot find type `HashMap` in this scope
   --> crates/codex/src/mcp/tests_runtime_app.rs:101:18
    |
101 |     let env_map: HashMap<OsString, OsString> = stdio_launcher.env.into_iter().collect();
    |                  ^^^^^^^ not found in this scope
    |
    = note: struct `crate::mcp::test_support::HashMap` exists but is inaccessible
help: consider importing this struct
    |
1   + use std::collections::HashMap;
    |

error[E0412]: cannot find type `OsString` in this scope
   --> crates/codex/src/mcp/tests_runtime_app.rs:101:26
    |
101 |     let env_map: HashMap<OsString, OsString> = stdio_launcher.env.into_iter().collect();
    |                          ^^^^^^^^
   --> /rustc/29483883eed69d5fb4db01964cdf2af4d86e9cb2/library/alloc/src/string.rs:360:1
    |
    = note: similarly named struct `String` defined here
    |
help: a struct with a similar name exists
    |
101 -     let env_map: HashMap<OsString, OsString> = stdio_launcher.env.into_iter().collect();
101 +     let env_map: HashMap<String, OsString> = stdio_launcher.env.into_iter().collect();
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0412]: cannot find type `OsString` in this scope
   --> crates/codex/src/mcp/tests_runtime_app.rs:101:36
    |
101 |     let env_map: HashMap<OsString, OsString> = stdio_launcher.env.into_iter().collect();
    |                                    ^^^^^^^^
   --> /rustc/29483883eed69d5fb4db01964cdf2af4d86e9cb2/library/alloc/src/string.rs:360:1
    |
    = note: similarly named struct `String` defined here
    |
help: a struct with a similar name exists
    |
101 -     let env_map: HashMap<OsString, OsString> = stdio_launcher.env.into_iter().collect();
101 +     let env_map: HashMap<OsString, String> = stdio_launcher.env.into_iter().collect();
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:103:22
    |
103 |         env_map.get(&OsString::from("CODEX_HOME")),
    |                      ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
103 -         env_map.get(&OsString::from("CODEX_HOME")),
103 +         env_map.get(&String::from("CODEX_HOME")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:107:22
    |
107 |         env_map.get(&OsString::from("DEFAULT_ONLY")),
    |                      ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
107 -         env_map.get(&OsString::from("DEFAULT_ONLY")),
107 +         env_map.get(&String::from("DEFAULT_ONLY")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:108:15
    |
108 |         Some(&OsString::from("default"))
    |               ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
108 -         Some(&OsString::from("default"))
108 +         Some(&String::from("default"))
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:111:22
    |
111 |         env_map.get(&OsString::from(request_env_key)),
    |                      ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
111 -         env_map.get(&OsString::from(request_env_key)),
111 +         env_map.get(&String::from(request_env_key)),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:112:15
    |
112 |         Some(&OsString::from("injected"))
    |               ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
112 -         Some(&OsString::from("injected"))
112 +         Some(&String::from("injected"))
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:115:22
    |
115 |         env_map.get(&OsString::from(stdio_env_key)),
    |                      ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
115 -         env_map.get(&OsString::from(stdio_env_key)),
115 +         env_map.get(&String::from(stdio_env_key)),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:116:15
    |
116 |         Some(&OsString::from("runtime-env"))
    |               ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
116 -         Some(&OsString::from("runtime-env"))
116 +         Some(&String::from("runtime-env"))
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_runtime_app.rs:134:14
    |
134 |         Some(Duration::from_millis(2200))
    |              ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `fs`
   --> crates/codex/src/mcp/tests_runtime_app.rs:171:17
    |
171 |     let after = fs::read_to_string(manager.config_path()).expect("read config after");
    |                 ^^ use of unresolved module or unlinked crate `fs`
    |
    = help: if you wanted to use a crate named `fs`, use `cargo add fs` to add it to your `Cargo.toml`
    = note: module `crate::mcp::test_support::fs` exists but is inaccessible
help: consider importing one of these modules
    |
1   + use crate::fs;
    |
1   + use std::fs;
    |
1   + use tokio::fs;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `env`
   --> crates/codex/src/mcp/tests_runtime_app.rs:174:5
    |
174 |     env::remove_var(http_env_key);
    |     ^^^ use of unresolved module or unlinked crate `env`
    |
    = help: if you wanted to use a crate named `env`, use `cargo add env` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::env;
    |
1   + use std::env;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `env`
   --> crates/codex/src/mcp/tests_runtime_app.rs:175:5
    |
175 |     env::remove_var(request_env_key);
    |     ^^^ use of unresolved module or unlinked crate `env`
    |
    = help: if you wanted to use a crate named `env`, use `cargo add env` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::env;
    |
1   + use std::env;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `env`
   --> crates/codex/src/mcp/tests_runtime_app.rs:182:5
    |
182 |     env::set_var(env_var, "prepare-token");
    |     ^^^ use of unresolved module or unlinked crate `env`
    |
    = help: if you wanted to use a crate named `env`, use `cargo add env` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::env;
    |
1   + use std::env;
    |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
   --> crates/codex/src/mcp/tests_runtime_app.rs:196:18
    |
196 |             env: BTreeMap::new(),
    |                  ^^^^^^^^ use of undeclared type `BTreeMap`
    |
help: consider importing one of these structs
    |
1   + use crate::BTreeMap;
    |
1   + use std::collections::BTreeMap;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `fs`
   --> crates/codex/src/mcp/tests_runtime_app.rs:201:18
    |
201 |     let before = fs::read_to_string(manager.config_path()).expect("read config before");
    |                  ^^ use of unresolved module or unlinked crate `fs`
    |
    = help: if you wanted to use a crate named `fs`, use `cargo add fs` to add it to your `Cargo.toml`
    = note: module `crate::mcp::test_support::fs` exists but is inaccessible
help: consider importing one of these modules
    |
1   + use crate::fs;
    |
1   + use std::fs;
    |
1   + use tokio::fs;
    |

error[E0433]: failed to resolve: use of undeclared type `PathBuf`
   --> crates/codex/src/mcp/tests_runtime_app.rs:204:17
    |
204 |         binary: PathBuf::from("codex"),
    |                 ^^^^^^^ use of undeclared type `PathBuf`
    |
help: consider importing one of these structs
    |
1   + use crate::PathBuf;
    |
1   + use std::path::PathBuf;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_runtime_app.rs:210:26
    |
210 |         startup_timeout: Duration::from_secs(2),
    |                          ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `fs`
   --> crates/codex/src/mcp/tests_runtime_app.rs:237:17
    |
237 |     let after = fs::read_to_string(manager.config_path()).expect("read config after");
    |                 ^^ use of unresolved module or unlinked crate `fs`
    |
    = help: if you wanted to use a crate named `fs`, use `cargo add fs` to add it to your `Cargo.toml`
    = note: module `crate::mcp::test_support::fs` exists but is inaccessible
help: consider importing one of these modules
    |
1   + use crate::fs;
    |
1   + use std::fs;
    |
1   + use tokio::fs;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `env`
   --> crates/codex/src/mcp/tests_runtime_app.rs:240:5
    |
240 |     env::remove_var(env_var);
    |     ^^^ use of unresolved module or unlinked crate `env`
    |
    = help: if you wanted to use a crate named `env`, use `cargo add env` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::env;
    |
1   + use std::env;
    |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
   --> crates/codex/src/mcp/tests_runtime_app.rs:249:25
    |
249 |     let mut alpha_env = BTreeMap::new();
    |                         ^^^^^^^^ use of undeclared type `BTreeMap`
    |
help: consider importing one of these structs
    |
1   + use crate::BTreeMap;
    |
1   + use std::collections::BTreeMap;
    |

error[E0433]: failed to resolve: use of undeclared type `PathBuf`
   --> crates/codex/src/mcp/tests_runtime_app.rs:264:30
    |
264 |                 binary: Some(PathBuf::from("/bin/app-alpha")),
    |                              ^^^^^^^ use of undeclared type `PathBuf`
    |
help: consider importing one of these structs
    |
1   + use crate::PathBuf;
    |
1   + use std::path::PathBuf;
    |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
   --> crates/codex/src/mcp/tests_runtime_app.rs:271:24
    |
271 |     let mut beta_env = BTreeMap::new();
    |                        ^^^^^^^^ use of undeclared type `BTreeMap`
    |
help: consider importing one of these structs
    |
1   + use crate::BTreeMap;
    |
1   + use std::collections::BTreeMap;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `fs`
   --> crates/codex/src/mcp/tests_runtime_app.rs:292:18
    |
292 |     let before = fs::read_to_string(manager.config_path()).expect("read config before");
    |                  ^^ use of unresolved module or unlinked crate `fs`
    |
    = help: if you wanted to use a crate named `fs`, use `cargo add fs` to add it to your `Cargo.toml`
    = note: module `crate::mcp::test_support::fs` exists but is inaccessible
help: consider importing one of these modules
    |
1   + use crate::fs;
    |
1   + use std::fs;
    |
1   + use tokio::fs;
    |

error[E0433]: failed to resolve: use of undeclared type `PathBuf`
   --> crates/codex/src/mcp/tests_runtime_app.rs:297:17
    |
297 |         binary: PathBuf::from("codex"),
    |                 ^^^^^^^ use of undeclared type `PathBuf`
    |
help: consider importing one of these structs
    |
1   + use crate::PathBuf;
    |
1   + use std::path::PathBuf;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:301:14
    |
301 |             (OsString::from("DEFAULT_ONLY"), OsString::from("base")),
    |              ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
301 -             (OsString::from("DEFAULT_ONLY"), OsString::from("base")),
301 +             (String::from("DEFAULT_ONLY"), OsString::from("base")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:301:46
    |
301 |             (OsString::from("DEFAULT_ONLY"), OsString::from("base")),
    |                                              ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
301 -             (OsString::from("DEFAULT_ONLY"), OsString::from("base")),
301 +             (OsString::from("DEFAULT_ONLY"), String::from("base")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:302:14
    |
302 |             (OsString::from("OVERRIDE_ME"), OsString::from("base")),
    |              ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
302 -             (OsString::from("OVERRIDE_ME"), OsString::from("base")),
302 +             (String::from("OVERRIDE_ME"), OsString::from("base")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:302:45
    |
302 |             (OsString::from("OVERRIDE_ME"), OsString::from("base")),
    |                                             ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
302 -             (OsString::from("OVERRIDE_ME"), OsString::from("base")),
302 +             (OsString::from("OVERRIDE_ME"), String::from("base")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_runtime_app.rs:306:26
    |
306 |         startup_timeout: Duration::from_secs(3),
    |                          ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of undeclared type `PathBuf`
   --> crates/codex/src/mcp/tests_runtime_app.rs:328:37
    |
328 |     assert_eq!(alpha.config.binary, PathBuf::from("/bin/app-alpha"));
    |                                     ^^^^^^^ use of undeclared type `PathBuf`
    |
help: consider importing one of these structs
    |
1   + use crate::PathBuf;
    |
1   + use std::path::PathBuf;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_runtime_app.rs:338:46
    |
338 |     assert_eq!(alpha.config.startup_timeout, Duration::from_millis(4200));
    |                                              ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0412]: cannot find type `HashMap` in this scope
   --> crates/codex/src/mcp/tests_runtime_app.rs:340:20
    |
340 |     let alpha_env: HashMap<OsString, OsString> = alpha.config.env.into_iter().collect();
    |                    ^^^^^^^ not found in this scope
    |
    = note: struct `crate::mcp::test_support::HashMap` exists but is inaccessible
help: consider importing this struct
    |
1   + use std::collections::HashMap;
    |

error[E0412]: cannot find type `OsString` in this scope
   --> crates/codex/src/mcp/tests_runtime_app.rs:340:28
    |
340 |     let alpha_env: HashMap<OsString, OsString> = alpha.config.env.into_iter().collect();
    |                            ^^^^^^^^
   --> /rustc/29483883eed69d5fb4db01964cdf2af4d86e9cb2/library/alloc/src/string.rs:360:1
    |
    = note: similarly named struct `String` defined here
    |
help: a struct with a similar name exists
    |
340 -     let alpha_env: HashMap<OsString, OsString> = alpha.config.env.into_iter().collect();
340 +     let alpha_env: HashMap<String, OsString> = alpha.config.env.into_iter().collect();
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0412]: cannot find type `OsString` in this scope
   --> crates/codex/src/mcp/tests_runtime_app.rs:340:38
    |
340 |     let alpha_env: HashMap<OsString, OsString> = alpha.config.env.into_iter().collect();
    |                                      ^^^^^^^^
   --> /rustc/29483883eed69d5fb4db01964cdf2af4d86e9cb2/library/alloc/src/string.rs:360:1
    |
    = note: similarly named struct `String` defined here
    |
help: a struct with a similar name exists
    |
340 -     let alpha_env: HashMap<OsString, OsString> = alpha.config.env.into_iter().collect();
340 +     let alpha_env: HashMap<OsString, String> = alpha.config.env.into_iter().collect();
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:342:24
    |
342 |         alpha_env.get(&OsString::from("CODEX_HOME")),
    |                        ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
342 -         alpha_env.get(&OsString::from("CODEX_HOME")),
342 +         alpha_env.get(&String::from("CODEX_HOME")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:346:24
    |
346 |         alpha_env.get(&OsString::from("DEFAULT_ONLY")),
    |                        ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
346 -         alpha_env.get(&OsString::from("DEFAULT_ONLY")),
346 +         alpha_env.get(&String::from("DEFAULT_ONLY")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:347:15
    |
347 |         Some(&OsString::from("base"))
    |               ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
347 -         Some(&OsString::from("base"))
347 +         Some(&String::from("base"))
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:350:24
    |
350 |         alpha_env.get(&OsString::from("OVERRIDE_ME")),
    |                        ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
350 -         alpha_env.get(&OsString::from("OVERRIDE_ME")),
350 +         alpha_env.get(&String::from("OVERRIDE_ME")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:351:15
    |
351 |         Some(&OsString::from("runtime"))
    |               ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
351 -         Some(&OsString::from("runtime"))
351 +         Some(&String::from("runtime"))
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:354:24
    |
354 |         alpha_env.get(&OsString::from("APP_RUNTIME_ENV")),
    |                        ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
354 -         alpha_env.get(&OsString::from("APP_RUNTIME_ENV")),
354 +         alpha_env.get(&String::from("APP_RUNTIME_ENV")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:355:15
    |
355 |         Some(&OsString::from("alpha"))
    |               ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
355 -         Some(&OsString::from("alpha"))
355 +         Some(&String::from("alpha"))
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `PathBuf`
   --> crates/codex/src/mcp/tests_runtime_app.rs:359:29
    |
359 |     assert_eq!(beta.binary, PathBuf::from("codex"));
    |                             ^^^^^^^ use of undeclared type `PathBuf`
    |
help: consider importing one of these structs
    |
1   + use crate::PathBuf;
    |
1   + use std::path::PathBuf;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_runtime_app.rs:363:38
    |
363 |     assert_eq!(beta.startup_timeout, Duration::from_secs(3));
    |                                      ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0412]: cannot find type `HashMap` in this scope
   --> crates/codex/src/mcp/tests_runtime_app.rs:365:19
    |
365 |     let beta_env: HashMap<OsString, OsString> = beta.env.into_iter().collect();
    |                   ^^^^^^^ not found in this scope
    |
    = note: struct `crate::mcp::test_support::HashMap` exists but is inaccessible
help: consider importing this struct
    |
1   + use std::collections::HashMap;
    |

error[E0412]: cannot find type `OsString` in this scope
   --> crates/codex/src/mcp/tests_runtime_app.rs:365:27
    |
365 |     let beta_env: HashMap<OsString, OsString> = beta.env.into_iter().collect();
    |                           ^^^^^^^^
   --> /rustc/29483883eed69d5fb4db01964cdf2af4d86e9cb2/library/alloc/src/string.rs:360:1
    |
    = note: similarly named struct `String` defined here
    |
help: a struct with a similar name exists
    |
365 -     let beta_env: HashMap<OsString, OsString> = beta.env.into_iter().collect();
365 +     let beta_env: HashMap<String, OsString> = beta.env.into_iter().collect();
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0412]: cannot find type `OsString` in this scope
   --> crates/codex/src/mcp/tests_runtime_app.rs:365:37
    |
365 |     let beta_env: HashMap<OsString, OsString> = beta.env.into_iter().collect();
    |                                     ^^^^^^^^
   --> /rustc/29483883eed69d5fb4db01964cdf2af4d86e9cb2/library/alloc/src/string.rs:360:1
    |
    = note: similarly named struct `String` defined here
    |
help: a struct with a similar name exists
    |
365 -     let beta_env: HashMap<OsString, OsString> = beta.env.into_iter().collect();
365 +     let beta_env: HashMap<OsString, String> = beta.env.into_iter().collect();
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:367:23
    |
367 |         beta_env.get(&OsString::from("CODEX_HOME")),
    |                       ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
367 -         beta_env.get(&OsString::from("CODEX_HOME")),
367 +         beta_env.get(&String::from("CODEX_HOME")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:371:23
    |
371 |         beta_env.get(&OsString::from("DEFAULT_ONLY")),
    |                       ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
371 -         beta_env.get(&OsString::from("DEFAULT_ONLY")),
371 +         beta_env.get(&String::from("DEFAULT_ONLY")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:372:15
    |
372 |         Some(&OsString::from("base"))
    |               ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
372 -         Some(&OsString::from("base"))
372 +         Some(&String::from("base"))
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:375:23
    |
375 |         beta_env.get(&OsString::from("OVERRIDE_ME")),
    |                       ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
375 -         beta_env.get(&OsString::from("OVERRIDE_ME")),
375 +         beta_env.get(&String::from("OVERRIDE_ME")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:376:15
    |
376 |         Some(&OsString::from("base"))
    |               ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
376 -         Some(&OsString::from("base"))
376 +         Some(&String::from("base"))
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:379:23
    |
379 |         beta_env.get(&OsString::from("APP_RUNTIME_ENV")),
    |                       ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
379 -         beta_env.get(&OsString::from("APP_RUNTIME_ENV")),
379 +         beta_env.get(&String::from("APP_RUNTIME_ENV")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:380:15
    |
380 |         Some(&OsString::from("beta"))
    |               ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
380 -         Some(&OsString::from("beta"))
380 +         Some(&String::from("beta"))
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `fs`
   --> crates/codex/src/mcp/tests_runtime_app.rs:389:17
    |
389 |     let after = fs::read_to_string(manager.config_path()).expect("read config after");
    |                 ^^ use of unresolved module or unlinked crate `fs`
    |
    = help: if you wanted to use a crate named `fs`, use `cargo add fs` to add it to your `Cargo.toml`
    = note: module `crate::mcp::test_support::fs` exists but is inaccessible
help: consider importing one of these modules
    |
1   + use crate::fs;
    |
1   + use std::fs;
    |
1   + use tokio::fs;
    |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
   --> crates/codex/src/mcp/tests_runtime_app.rs:399:23
    |
399 |     let mut env_map = BTreeMap::new();
    |                       ^^^^^^^^ use of undeclared type `BTreeMap`
    |
help: consider importing one of these structs
    |
1   + use crate::BTreeMap;
    |
1   + use std::collections::BTreeMap;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:426:13
    |
426 |             OsString::from("APP_RUNTIME_LIFECYCLE"),
    |             ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
426 -             OsString::from("APP_RUNTIME_LIFECYCLE"),
426 +             String::from("APP_RUNTIME_LIFECYCLE"),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:427:13
    |
427 |             OsString::from("default"),
    |             ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
427 -             OsString::from("default"),
427 +             String::from("default"),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_runtime_app.rs:431:26
    |
431 |         startup_timeout: Duration::from_secs(3),
    |                          ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `fs`
   --> crates/codex/src/mcp/tests_runtime_app.rs:434:18
    |
434 |     let before = fs::read_to_string(manager.config_path()).expect("read config before");
    |                  ^^ use of unresolved module or unlinked crate `fs`
    |
    = help: if you wanted to use a crate named `fs`, use `cargo add fs` to add it to your `Cargo.toml`
    = note: module `crate::mcp::test_support::fs` exists but is inaccessible
help: consider importing one of these modules
    |
1   + use crate::fs;
    |
1   + use std::fs;
    |
1   + use tokio::fs;
    |

error[E0412]: cannot find type `HashMap` in this scope
   --> crates/codex/src/mcp/tests_runtime_app.rs:445:21
    |
445 |     let env_values: HashMap<OsString, OsString> = runtime.config.env.iter().cloned().collect();
    |                     ^^^^^^^ not found in this scope
    |
    = note: struct `crate::mcp::test_support::HashMap` exists but is inaccessible
help: consider importing this struct
    |
1   + use std::collections::HashMap;
    |

error[E0412]: cannot find type `OsString` in this scope
   --> crates/codex/src/mcp/tests_runtime_app.rs:445:29
    |
445 |     let env_values: HashMap<OsString, OsString> = runtime.config.env.iter().cloned().collect();
    |                             ^^^^^^^^
   --> /rustc/29483883eed69d5fb4db01964cdf2af4d86e9cb2/library/alloc/src/string.rs:360:1
    |
    = note: similarly named struct `String` defined here
    |
help: a struct with a similar name exists
    |
445 -     let env_values: HashMap<OsString, OsString> = runtime.config.env.iter().cloned().collect();
445 +     let env_values: HashMap<String, OsString> = runtime.config.env.iter().cloned().collect();
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0412]: cannot find type `OsString` in this scope
   --> crates/codex/src/mcp/tests_runtime_app.rs:445:39
    |
445 |     let env_values: HashMap<OsString, OsString> = runtime.config.env.iter().cloned().collect();
    |                                       ^^^^^^^^
   --> /rustc/29483883eed69d5fb4db01964cdf2af4d86e9cb2/library/alloc/src/string.rs:360:1
    |
    = note: similarly named struct `String` defined here
    |
help: a struct with a similar name exists
    |
445 -     let env_values: HashMap<OsString, OsString> = runtime.config.env.iter().cloned().collect();
445 +     let env_values: HashMap<OsString, String> = runtime.config.env.iter().cloned().collect();
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:447:25
    |
447 |         env_values.get(&OsString::from("CODEX_HOME")),
    |                         ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
447 -         env_values.get(&OsString::from("CODEX_HOME")),
447 +         env_values.get(&String::from("CODEX_HOME")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:451:25
    |
451 |         env_values.get(&OsString::from("APP_RUNTIME_LIFECYCLE")),
    |                         ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
451 -         env_values.get(&OsString::from("APP_RUNTIME_LIFECYCLE")),
451 +         env_values.get(&String::from("APP_RUNTIME_LIFECYCLE")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:452:15
    |
452 |         Some(&OsString::from("runtime-env"))
    |               ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
452 -         Some(&OsString::from("runtime-env"))
452 +         Some(&String::from("runtime-env"))
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_runtime_app.rs:463:27
    |
463 |     let thread_response = time::timeout(Duration::from_secs(2), thread.response)
    |                           ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_runtime_app.rs:463:41
    |
463 |     let thread_response = time::timeout(Duration::from_secs(2), thread.response)
    |                                         ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of undeclared type `Value`
   --> crates/codex/src/mcp/tests_runtime_app.rs:470:19
    |
470 |         .and_then(Value::as_str)
    |                   ^^^^^ use of undeclared type `Value`
    |
help: consider importing one of these items
    |
1   + use crate::Value;
    |
1   + use serde_json::Value;
    |
1   + use toml::Value;
    |
1   + use tracing::Value;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `fs`
   --> crates/codex/src/mcp/tests_runtime_app.rs:477:17
    |
477 |     let after = fs::read_to_string(manager.config_path()).expect("read config after");
    |                 ^^ use of unresolved module or unlinked crate `fs`
    |
    = help: if you wanted to use a crate named `fs`, use `cargo add fs` to add it to your `Cargo.toml`
    = note: module `crate::mcp::test_support::fs` exists but is inaccessible
help: consider importing one of these modules
    |
1   + use crate::fs;
    |
1   + use std::fs;
    |
1   + use tokio::fs;
    |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
   --> crates/codex/src/mcp/tests_runtime_app.rs:505:23
    |
505 |     let mut env_map = BTreeMap::new();
    |                       ^^^^^^^^ use of undeclared type `BTreeMap`
    |
help: consider importing one of these structs
    |
1   + use crate::BTreeMap;
    |
1   + use std::collections::BTreeMap;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:532:14
    |
532 |             (OsString::from("APP_POOL_ENV"), OsString::from("default")),
    |              ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
532 -             (OsString::from("APP_POOL_ENV"), OsString::from("default")),
532 +             (String::from("APP_POOL_ENV"), OsString::from("default")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:532:46
    |
532 |             (OsString::from("APP_POOL_ENV"), OsString::from("default")),
    |                                              ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
532 -             (OsString::from("APP_POOL_ENV"), OsString::from("default")),
532 +             (OsString::from("APP_POOL_ENV"), String::from("default")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:533:14
    |
533 |             (OsString::from("POOL_ONLY"), OsString::from("base")),
    |              ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
533 -             (OsString::from("POOL_ONLY"), OsString::from("base")),
533 +             (String::from("POOL_ONLY"), OsString::from("base")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:533:43
    |
533 |             (OsString::from("POOL_ONLY"), OsString::from("base")),
    |                                           ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
533 -             (OsString::from("POOL_ONLY"), OsString::from("base")),
533 +             (OsString::from("POOL_ONLY"), String::from("base")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_runtime_app.rs:537:26
    |
537 |         startup_timeout: Duration::from_secs(3),
    |                          ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `fs`
   --> crates/codex/src/mcp/tests_runtime_app.rs:540:18
    |
540 |     let before = fs::read_to_string(manager.config_path()).expect("read config before");
    |                  ^^ use of unresolved module or unlinked crate `fs`
    |
    = help: if you wanted to use a crate named `fs`, use `cargo add fs` to add it to your `Cargo.toml`
    = note: module `crate::mcp::test_support::fs` exists but is inaccessible
help: consider importing one of these modules
    |
1   + use crate::fs;
    |
1   + use std::fs;
    |
1   + use tokio::fs;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_runtime_app.rs:560:49
    |
560 |     assert_eq!(launcher_config.startup_timeout, Duration::from_secs(2));
    |                                                 ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0412]: cannot find type `HashMap` in this scope
   --> crates/codex/src/mcp/tests_runtime_app.rs:562:23
    |
562 |     let launcher_env: HashMap<OsString, OsString> = launcher_config.env.into_iter().collect();
    |                       ^^^^^^^ not found in this scope
    |
    = note: struct `crate::mcp::test_support::HashMap` exists but is inaccessible
help: consider importing this struct
    |
1   + use std::collections::HashMap;
    |

error[E0412]: cannot find type `OsString` in this scope
   --> crates/codex/src/mcp/tests_runtime_app.rs:562:31
    |
562 |     let launcher_env: HashMap<OsString, OsString> = launcher_config.env.into_iter().collect();
    |                               ^^^^^^^^
   --> /rustc/29483883eed69d5fb4db01964cdf2af4d86e9cb2/library/alloc/src/string.rs:360:1
    |
    = note: similarly named struct `String` defined here
    |
help: a struct with a similar name exists
    |
562 -     let launcher_env: HashMap<OsString, OsString> = launcher_config.env.into_iter().collect();
562 +     let launcher_env: HashMap<String, OsString> = launcher_config.env.into_iter().collect();
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0412]: cannot find type `OsString` in this scope
   --> crates/codex/src/mcp/tests_runtime_app.rs:562:41
    |
562 |     let launcher_env: HashMap<OsString, OsString> = launcher_config.env.into_iter().collect();
    |                                         ^^^^^^^^
   --> /rustc/29483883eed69d5fb4db01964cdf2af4d86e9cb2/library/alloc/src/string.rs:360:1
    |
    = note: similarly named struct `String` defined here
    |
help: a struct with a similar name exists
    |
562 -     let launcher_env: HashMap<OsString, OsString> = launcher_config.env.into_iter().collect();
562 +     let launcher_env: HashMap<OsString, String> = launcher_config.env.into_iter().collect();
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:564:27
    |
564 |         launcher_env.get(&OsString::from("CODEX_HOME")),
    |                           ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
564 -         launcher_env.get(&OsString::from("CODEX_HOME")),
564 +         launcher_env.get(&String::from("CODEX_HOME")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:568:27
    |
568 |         launcher_env.get(&OsString::from("POOL_ONLY")),
    |                           ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
568 -         launcher_env.get(&OsString::from("POOL_ONLY")),
568 +         launcher_env.get(&String::from("POOL_ONLY")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:569:15
    |
569 |         Some(&OsString::from("base"))
    |               ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
569 -         Some(&OsString::from("base"))
569 +         Some(&String::from("base"))
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:572:27
    |
572 |         launcher_env.get(&OsString::from("APP_POOL_ENV")),
    |                           ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
572 -         launcher_env.get(&OsString::from("APP_POOL_ENV")),
572 +         launcher_env.get(&String::from("APP_POOL_ENV")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:573:15
    |
573 |         Some(&OsString::from("runtime"))
    |               ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
573 -         Some(&OsString::from("runtime"))
573 +         Some(&String::from("runtime"))
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0412]: cannot find type `HashMap` in this scope
   --> crates/codex/src/mcp/tests_runtime_app.rs:581:20
    |
581 |     let stdio_env: HashMap<OsString, OsString> = stdio_config.env.into_iter().collect();
    |                    ^^^^^^^ not found in this scope
    |
    = note: struct `crate::mcp::test_support::HashMap` exists but is inaccessible
help: consider importing this struct
    |
1   + use std::collections::HashMap;
    |

error[E0412]: cannot find type `OsString` in this scope
   --> crates/codex/src/mcp/tests_runtime_app.rs:581:28
    |
581 |     let stdio_env: HashMap<OsString, OsString> = stdio_config.env.into_iter().collect();
    |                            ^^^^^^^^
   --> /rustc/29483883eed69d5fb4db01964cdf2af4d86e9cb2/library/alloc/src/string.rs:360:1
    |
    = note: similarly named struct `String` defined here
    |
help: a struct with a similar name exists
    |
581 -     let stdio_env: HashMap<OsString, OsString> = stdio_config.env.into_iter().collect();
581 +     let stdio_env: HashMap<String, OsString> = stdio_config.env.into_iter().collect();
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0412]: cannot find type `OsString` in this scope
   --> crates/codex/src/mcp/tests_runtime_app.rs:581:38
    |
581 |     let stdio_env: HashMap<OsString, OsString> = stdio_config.env.into_iter().collect();
    |                                      ^^^^^^^^
   --> /rustc/29483883eed69d5fb4db01964cdf2af4d86e9cb2/library/alloc/src/string.rs:360:1
    |
    = note: similarly named struct `String` defined here
    |
help: a struct with a similar name exists
    |
581 -     let stdio_env: HashMap<OsString, OsString> = stdio_config.env.into_iter().collect();
581 +     let stdio_env: HashMap<OsString, String> = stdio_config.env.into_iter().collect();
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:583:24
    |
583 |         stdio_env.get(&OsString::from("POOL_ONLY")),
    |                        ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
583 -         stdio_env.get(&OsString::from("POOL_ONLY")),
583 +         stdio_env.get(&String::from("POOL_ONLY")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:584:15
    |
584 |         Some(&OsString::from("base"))
    |               ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
584 -         Some(&OsString::from("base"))
584 +         Some(&String::from("base"))
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:587:24
    |
587 |         stdio_env.get(&OsString::from("CODEX_HOME")),
    |                        ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
587 -         stdio_env.get(&OsString::from("CODEX_HOME")),
587 +         stdio_env.get(&String::from("CODEX_HOME")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:591:24
    |
591 |         stdio_env.get(&OsString::from("APP_POOL_ENV")),
    |                        ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
591 -         stdio_env.get(&OsString::from("APP_POOL_ENV")),
591 +         stdio_env.get(&String::from("APP_POOL_ENV")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:592:15
    |
592 |         Some(&OsString::from("runtime"))
    |               ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
592 -         Some(&OsString::from("runtime"))
592 +         Some(&String::from("runtime"))
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0412]: cannot find type `HashMap` in this scope
   --> crates/codex/src/mcp/tests_runtime_app.rs:604:21
    |
604 |     let env_values: HashMap<OsString, OsString> = runtime.config.env.iter().cloned().collect();
    |                     ^^^^^^^ not found in this scope
    |
    = note: struct `crate::mcp::test_support::HashMap` exists but is inaccessible
help: consider importing this struct
    |
1   + use std::collections::HashMap;
    |

error[E0412]: cannot find type `OsString` in this scope
   --> crates/codex/src/mcp/tests_runtime_app.rs:604:29
    |
604 |     let env_values: HashMap<OsString, OsString> = runtime.config.env.iter().cloned().collect();
    |                             ^^^^^^^^
   --> /rustc/29483883eed69d5fb4db01964cdf2af4d86e9cb2/library/alloc/src/string.rs:360:1
    |
    = note: similarly named struct `String` defined here
    |
help: a struct with a similar name exists
    |
604 -     let env_values: HashMap<OsString, OsString> = runtime.config.env.iter().cloned().collect();
604 +     let env_values: HashMap<String, OsString> = runtime.config.env.iter().cloned().collect();
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0412]: cannot find type `OsString` in this scope
   --> crates/codex/src/mcp/tests_runtime_app.rs:604:39
    |
604 |     let env_values: HashMap<OsString, OsString> = runtime.config.env.iter().cloned().collect();
    |                                       ^^^^^^^^
   --> /rustc/29483883eed69d5fb4db01964cdf2af4d86e9cb2/library/alloc/src/string.rs:360:1
    |
    = note: similarly named struct `String` defined here
    |
help: a struct with a similar name exists
    |
604 -     let env_values: HashMap<OsString, OsString> = runtime.config.env.iter().cloned().collect();
604 +     let env_values: HashMap<OsString, String> = runtime.config.env.iter().cloned().collect();
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:606:25
    |
606 |         env_values.get(&OsString::from("CODEX_HOME")),
    |                         ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
606 -         env_values.get(&OsString::from("CODEX_HOME")),
606 +         env_values.get(&String::from("CODEX_HOME")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:610:25
    |
610 |         env_values.get(&OsString::from("POOL_ONLY")),
    |                         ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
610 -         env_values.get(&OsString::from("POOL_ONLY")),
610 +         env_values.get(&String::from("POOL_ONLY")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:611:15
    |
611 |         Some(&OsString::from("base"))
    |               ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
611 -         Some(&OsString::from("base"))
611 +         Some(&String::from("base"))
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:614:25
    |
614 |         env_values.get(&OsString::from("APP_POOL_ENV")),
    |                         ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
614 -         env_values.get(&OsString::from("APP_POOL_ENV")),
614 +         env_values.get(&String::from("APP_POOL_ENV")),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:615:15
    |
615 |         Some(&OsString::from("runtime"))
    |               ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
615 -         Some(&OsString::from("runtime"))
615 +         Some(&String::from("runtime"))
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_runtime_app.rs:626:20
    |
626 |     let response = time::timeout(Duration::from_secs(2), thread.response)
    |                    ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_runtime_app.rs:626:34
    |
626 |     let response = time::timeout(Duration::from_secs(2), thread.response)
    |                                  ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of undeclared type `Value`
   --> crates/codex/src/mcp/tests_runtime_app.rs:633:19
    |
633 |         .and_then(Value::as_str)
    |                   ^^^^^ use of undeclared type `Value`
    |
help: consider importing one of these items
    |
1   + use crate::Value;
    |
1   + use serde_json::Value;
    |
1   + use toml::Value;
    |
1   + use tracing::Value;
    |

error[E0433]: failed to resolve: use of undeclared type `Arc`
   --> crates/codex/src/mcp/tests_runtime_app.rs:649:13
    |
649 |     assert!(Arc::ptr_eq(&runtime, &reused));
    |             ^^^ use of undeclared type `Arc`
    |
    = note: struct `crate::mcp::test_support::Arc` exists but is inaccessible
help: consider importing this struct
    |
1   + use std::sync::Arc;
    |

error[E0433]: failed to resolve: use of undeclared type `Arc`
   --> crates/codex/src/mcp/tests_runtime_app.rs:663:14
    |
663 |     assert!(!Arc::ptr_eq(&runtime, &restarted));
    |              ^^^ use of undeclared type `Arc`
    |
    = note: struct `crate::mcp::test_support::Arc` exists but is inaccessible
help: consider importing this struct
    |
1   + use std::sync::Arc;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `fs`
   --> crates/codex/src/mcp/tests_runtime_app.rs:669:17
    |
669 |     let after = fs::read_to_string(manager.config_path()).expect("read config after");
    |                 ^^ use of unresolved module or unlinked crate `fs`
    |
    = help: if you wanted to use a crate named `fs`, use `cargo add fs` to add it to your `Cargo.toml`
    = note: module `crate::mcp::test_support::fs` exists but is inaccessible
help: consider importing one of these modules
    |
1   + use crate::fs;
    |
1   + use std::fs;
    |
1   + use tokio::fs;
    |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
   --> crates/codex/src/mcp/tests_runtime_app.rs:686:22
    |
686 |                 env: BTreeMap::new(),
    |                      ^^^^^^^^ use of undeclared type `BTreeMap`
    |
help: consider importing one of these structs
    |
1   + use crate::BTreeMap;
    |
1   + use std::collections::BTreeMap;
    |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
   --> crates/codex/src/mcp/tests_runtime_app.rs:705:22
    |
705 |                 env: BTreeMap::new(),
    |                      ^^^^^^^^ use of undeclared type `BTreeMap`
    |
help: consider importing one of these structs
    |
1   + use crate::BTreeMap;
    |
1   + use std::collections::BTreeMap;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_runtime_app.rs:724:26
    |
724 |         startup_timeout: Duration::from_secs(3),
    |                          ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `fs`
   --> crates/codex/src/mcp/tests_runtime_app.rs:727:18
    |
727 |     let before = fs::read_to_string(manager.config_path()).expect("read config before");
    |                  ^^ use of unresolved module or unlinked crate `fs`
    |
    = help: if you wanted to use a crate named `fs`, use `cargo add fs` to add it to your `Cargo.toml`
    = note: module `crate::mcp::test_support::fs` exists but is inaccessible
help: consider importing one of these modules
    |
1   + use crate::fs;
    |
1   + use std::fs;
    |
1   + use tokio::fs;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_runtime_app.rs:761:13
    |
761 |     let _ = time::timeout(Duration::from_secs(2), alpha_thread.response)
    |             ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_runtime_app.rs:761:27
    |
761 |     let _ = time::timeout(Duration::from_secs(2), alpha_thread.response)
    |                           ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of undeclared type `Arc`
   --> crates/codex/src/mcp/tests_runtime_app.rs:774:14
    |
774 |     assert!(!Arc::ptr_eq(&alpha, &restarted_alpha));
    |              ^^^ use of undeclared type `Arc`
    |
    = note: struct `crate::mcp::test_support::Arc` exists but is inaccessible
help: consider importing this struct
    |
1   + use std::sync::Arc;
    |

error[E0433]: failed to resolve: use of undeclared type `Arc`
   --> crates/codex/src/mcp/tests_runtime_app.rs:778:14
    |
778 |     assert!(!Arc::ptr_eq(&beta, &restarted_beta));
    |              ^^^ use of undeclared type `Arc`
    |
    = note: struct `crate::mcp::test_support::Arc` exists but is inaccessible
help: consider importing this struct
    |
1   + use std::sync::Arc;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `fs`
   --> crates/codex/src/mcp/tests_runtime_app.rs:786:17
    |
786 |     let after = fs::read_to_string(manager.config_path()).expect("read config after");
    |                 ^^ use of unresolved module or unlinked crate `fs`
    |
    = help: if you wanted to use a crate named `fs`, use `cargo add fs` to add it to your `Cargo.toml`
    = note: module `crate::mcp::test_support::fs` exists but is inaccessible
help: consider importing one of these modules
    |
1   + use crate::fs;
    |
1   + use std::fs;
    |
1   + use tokio::fs;
    |

error[E0433]: failed to resolve: use of undeclared type `PathBuf`
   --> crates/codex/src/mcp/tests_runtime_app.rs:796:17
    |
796 |         binary: PathBuf::from("codex"),
    |                 ^^^^^^^ use of undeclared type `PathBuf`
    |
help: consider importing one of these structs
    |
1   + use crate::PathBuf;
    |
1   + use std::path::PathBuf;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:800:13
    |
800 |             OsString::from("MCP_RUNTIME_ENV_E8"),
    |             ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
800 -             OsString::from("MCP_RUNTIME_ENV_E8"),
800 +             String::from("MCP_RUNTIME_ENV_E8"),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `OsString`
   --> crates/codex/src/mcp/tests_runtime_app.rs:801:13
    |
801 |             OsString::from("manager-ok"),
    |             ^^^^^^^^ use of undeclared type `OsString`
    |
help: a struct with a similar name exists
    |
801 -             OsString::from("manager-ok"),
801 +             String::from("manager-ok"),
    |
help: consider importing one of these structs
    |
1   + use crate::OsString;
    |
1   + use std::ffi::OsString;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_runtime_app.rs:805:26
    |
805 |         startup_timeout: Duration::from_secs(5),
    |                          ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
   --> crates/codex/src/mcp/tests_runtime_app.rs:813:18
    |
813 |             env: BTreeMap::new(),
    |                  ^^^^^^^^ use of undeclared type `BTreeMap`
    |
help: consider importing one of these structs
    |
1   + use crate::BTreeMap;
    |
1   + use std::collections::BTreeMap;
    |

error[E0433]: failed to resolve: use of undeclared type `BufReader`
   --> crates/codex/src/mcp/tests_runtime_app.rs:832:22
    |
832 |     let mut reader = BufReader::new(handle.stdout_mut());
    |                      ^^^^^^^^^ use of undeclared type `BufReader`
    |
    = note: struct `crate::mcp::test_support::BufReader` exists but is inaccessible
help: consider importing one of these structs
    |
1   + use crate::stdio::BufReader;
    |
1   + use std::io::BufReader;
    |
1   + use futures_util::io::BufReader;
    |
1   + use tokio::io::BufReader;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `time`
   --> crates/codex/src/mcp/tests_runtime_app.rs:834:13
    |
834 |     let _ = time::timeout(Duration::from_secs(2), reader.read_line(&mut line))
    |             ^^^^ use of unresolved module or unlinked crate `time`
    |
    = help: if you wanted to use a crate named `time`, use `cargo add time` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::time;
    |
1   + use tokio::time;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_runtime_app.rs:834:27
    |
834 |     let _ = time::timeout(Duration::from_secs(2), reader.read_line(&mut line))
    |                           ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `env`
   --> crates/codex/src/mcp/tests_runtime_app.rs:849:5
    |
849 |     env::set_var(env_var, "token-hints");
    |     ^^^ use of unresolved module or unlinked crate `env`
    |
    = help: if you wanted to use a crate named `env`, use `cargo add env` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::env;
    |
1   + use std::env;
    |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
   --> crates/codex/src/mcp/tests_runtime_app.rs:853:18
    |
853 |         headers: BTreeMap::new(),
    |                  ^^^^^^^^ use of undeclared type `BTreeMap`
    |
help: consider importing one of these structs
    |
1   + use crate::BTreeMap;
    |
1   + use std::collections::BTreeMap;
    |

error[E0433]: failed to resolve: use of undeclared type `PathBuf`
   --> crates/codex/src/mcp/tests_runtime_app.rs:874:17
    |
874 |         binary: PathBuf::from("codex"),
    |                 ^^^^^^^ use of undeclared type `PathBuf`
    |
help: consider importing one of these structs
    |
1   + use crate::PathBuf;
    |
1   + use std::path::PathBuf;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_runtime_app.rs:880:26
    |
880 |         startup_timeout: Duration::from_secs(2),
    |                          ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `env`
   --> crates/codex/src/mcp/tests_runtime_app.rs:911:5
    |
911 |     env::remove_var(env_var);
    |     ^^^ use of unresolved module or unlinked crate `env`
    |
    = help: if you wanted to use a crate named `env`, use `cargo add env` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::env;
    |
1   + use std::env;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `env`
   --> crates/codex/src/mcp/tests_runtime_app.rs:917:5
    |
917 |     env::set_var(env_var, "token-reuse");
    |     ^^^ use of unresolved module or unlinked crate `env`
    |
    = help: if you wanted to use a crate named `env`, use `cargo add env` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::env;
    |
1   + use std::env;
    |

error[E0433]: failed to resolve: use of undeclared type `BTreeMap`
   --> crates/codex/src/mcp/tests_runtime_app.rs:924:26
    |
924 |                 headers: BTreeMap::new(),
    |                          ^^^^^^^^ use of undeclared type `BTreeMap`
    |
help: consider importing one of these structs
    |
1   + use crate::BTreeMap;
    |
1   + use std::collections::BTreeMap;
    |

error[E0433]: failed to resolve: use of undeclared type `PathBuf`
   --> crates/codex/src/mcp/tests_runtime_app.rs:939:17
    |
939 |         binary: PathBuf::from("codex"),
    |                 ^^^^^^^ use of undeclared type `PathBuf`
    |
help: consider importing one of these structs
    |
1   + use crate::PathBuf;
    |
1   + use std::path::PathBuf;
    |

error[E0433]: failed to resolve: use of undeclared type `Duration`
   --> crates/codex/src/mcp/tests_runtime_app.rs:945:26
    |
945 |         startup_timeout: Duration::from_secs(2),
    |                          ^^^^^^^^ use of undeclared type `Duration`
    |
help: consider importing one of these structs
    |
1   + use crate::Duration;
    |
1   + use std::time::Duration;
    |
1   + use tokio::time::Duration;
    |

error[E0433]: failed to resolve: use of unresolved module or unlinked crate `env`
   --> crates/codex/src/mcp/tests_runtime_app.rs:978:5
    |
978 |     env::remove_var(env_var);
    |     ^^^ use of unresolved module or unlinked crate `env`
    |
    = help: if you wanted to use a crate named `env`, use `cargo add env` to add it to your `Cargo.toml`
help: consider importing one of these modules
    |
1   + use crate::env;
    |
1   + use std::env;
    |

error: unused import: `serde_json::Value`
 --> crates/codex/src/mcp/test_support.rs:4:20
  |
4 |     pub(super) use serde_json::Value;
  |                    ^^^^^^^^^^^^^^^^^
  |
  = note: `-D unused-imports` implied by `-D warnings`
  = help: to override `-D warnings` add `#[allow(unused_imports)]`

error: unused imports: `HashMap`, `env`, `ffi::OsString`, and `sync::Arc`
  --> crates/codex/src/mcp/test_support.rs:6:33
   |
6  |         collections::{BTreeMap, HashMap},
   |                                 ^^^^^^^
7  |         env,
   |         ^^^
8  |         ffi::OsString,
   |         ^^^^^^^^^^^^^
...
12 |         sync::Arc,
   |         ^^^^^^^^^

error: unused imports: `AsyncBufReadExt`, `BufReader`, and `time`
  --> crates/codex/src/mcp/test_support.rs:16:14
   |
16 |         io::{AsyncBufReadExt, BufReader},
   |              ^^^^^^^^^^^^^^^  ^^^^^^^^^
17 |         time,
   |         ^^^^

error: unused import: `toml::Value as TomlValue`
  --> crates/codex/src/mcp/test_support.rs:19:20
   |
19 |     pub(super) use toml::Value as TomlValue;
   |                    ^^^^^^^^^^^^^^^^^^^^^^^^

error: unused import: `prelude::*`
 --> crates/codex/src/mcp/tests_core.rs:1:27
  |
1 | use super::test_support::{prelude::*, *};
  |                           ^^^^^^^^^^

error: unused import: `prelude::*`
 --> crates/codex/src/mcp/tests_runtime_app.rs:1:27
  |
1 | use super::test_support::{prelude::*, *};
  |                           ^^^^^^^^^^

    Checking xtask v0.2.0 (/home/dev/__Active_Code/codex_wrapper_new/crates/xtask)
error[E0277]: the size for values of type `str` cannot be known at compilation time
  --> crates/codex/src/mcp/tests_core.rs:30:9
   |
30 |     let argv_line = argv_line.expect("argv log should be written");
   |         ^^^^^^^^^ doesn't have a size known at compile-time
   |
   = help: the trait `std::marker::Sized` is not implemented for `str`
   = note: all local variables must have a statically known size

error[E0277]: the size for values of type `str` cannot be known at compilation time
  --> crates/codex/src/mcp/tests_core.rs:30:31
   |
30 |     let argv_line = argv_line.expect("argv log should be written");
   |                               ^^^^^^ doesn't have a size known at compile-time
   |
   = help: the trait `std::marker::Sized` is not implemented for `str`
note: required by a bound in `std::option::Option::<T>::expect`
  --> /rustc/29483883eed69d5fb4db01964cdf2af4d86e9cb2/library/core/src/option.rs:957:5

error[E0277]: the size for values of type `str` cannot be known at compilation time
  --> crates/codex/src/mcp/tests_core.rs:21:25
   |
21 |     let mut argv_line = None;
   |                         ^^^^ doesn't have a size known at compile-time
   |
   = help: the trait `std::marker::Sized` is not implemented for `str`
note: required by a bound in `std::prelude::v1::None`
  --> /rustc/29483883eed69d5fb4db01964cdf2af4d86e9cb2/library/core/src/option.rs:595:5

Some errors have detailed explanations: E0277, E0412, E0433.
For more information about an error, try `rustc --explain E0277`.
error: could not compile `codex` (lib test) due to 288 previous errors
warning: build failed, waiting for other jobs to finish...
clippy failed (exit=101)
