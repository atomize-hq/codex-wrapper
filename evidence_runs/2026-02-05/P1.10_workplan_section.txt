  - Each planned extraction is PR-sized and reversible; size-policy expectations are noted (§7.3).
  - No behavior changes (planning only).
- Risk: Low.
- Rollback: N/A (planning-only change).

##### P1.9 — Seam extraction: bundled binary resolver (`bundled_binary.rs`) (API preserved)

Status: [ ] Not Started  [ ] In Progress  [x] Done  
Last Updated: 2026-02-05

- Goal: Extract bundled binary resolution types + helpers (`BundledBinarySpec`, `BundledBinary`, `BundledBinaryError`, `resolve_bundled_binary`, `default_bundled_platform_label`) into `crates/codex/src/bundled_binary.rs`, preserving existing public API paths via re-exports from `lib.rs`.
- Expected files touched:
  - `crates/codex/src/lib.rs` (wire `mod bundled_binary;` + `pub use ...`; remove moved items)
  - `crates/codex/src/bundled_binary.rs` (new)
- Acceptance criteria (“done when”):
  - All §4.1 gates pass.
  - No public API path changes (façade + re-exports).
  - New module meets §7.3 size policy (target ≤ 300 LOC; may exceed soft if cohesive but must stay ≤ 600).
- Risk: Low (leaf-ish extraction; minimal call site churn).
- Rollback: Revert module move + re-exports; restore original definitions in `lib.rs`.

##### P1.10 — Seam extraction: exec JSONL event models (`events.rs`) (API preserved)

Status: [ ] Not Started  [ ] In Progress  [ ] Done  
Last Updated: YYYY-MM-DD

- Goal: Extract JSONL event envelope + payload models emitted by `codex exec --json` into `crates/codex/src/events.rs`, preserving existing public API paths via re-exports from `lib.rs` (e.g., `ThreadEvent`, `ItemEnvelope`, `ItemPayload`, delta/state structs, statuses).
- Expected files touched:
  - `crates/codex/src/lib.rs` (wire `mod events;` + `pub use ...`; remove moved items)
  - `crates/codex/src/events.rs` (new)
- Acceptance criteria (“done when”):
  - All §4.1 gates pass.
  - No public API path changes (façade + re-exports).
  - Serde shapes remain identical (pure move; no field/tag renames; tests pass).
  - New module meets §7.3 size policy (likely > soft; must stay ≤ 600 or be split into `events/*` if it grows).
- Risk: Medium (serialization/type visibility churn; keep move mechanical).
- Rollback: Revert module move + re-exports; restore original event model definitions in `lib.rs`.

##### P1.11 — Seam extraction: CLI subcommand request/response models (`cli/*`) (API preserved)

Status: [ ] Not Started  [ ] In Progress  [ ] Done  
Last Updated: YYYY-MM-DD

- Goal: Extract request/response model structs for non-streaming CLI subcommands into a cohesive `crates/codex/src/cli/*` module tree (e.g., features/help/review/resume/fork/cloud/app-server and `codex mcp` command request types), preserving existing public API paths via re-exports from `lib.rs`.
  - Naming note: keep this distinct from the `mcp/*` runtime module tree; this seam is about *invoking CLI subcommands*, not the internal MCP client/runtime implementation.
- Expected files touched:
  - `crates/codex/src/lib.rs` (wire `mod cli;` + `pub use ...`; remove moved items)
  - `crates/codex/src/cli/mod.rs` (new)
  - `crates/codex/src/cli/*.rs` (new; split by domain to satisfy §7.3)
- Acceptance criteria (“done when”):
  - All §4.1 gates pass.
  - No public API path changes (façade + re-exports).
  - New files meet §7.3 size policy (target ≤ 300 LOC each; must stay ≤ 600).
  - Step is “models-only” unless a small amount of wiring is necessary to keep the wrapper compiling (avoid moving execution logic in the same PR).
- Risk: Medium (large move surface; keep extraction mechanical and domain-split).
- Rollback: Revert module tree move + re-exports; restore original model structs in `lib.rs`.

##### P1.12 — Seam extraction: feature/version parsing + update advisory helpers (`version.rs`) (API preserved)

Status: [ ] Not Started  [ ] In Progress  [ ] Done  
Last Updated: YYYY-MM-DD

- Goal: Extract internal parsing/helpers around `codex --version` / `codex help` / `codex features list` probes (semver/channel parsing, commit hash extraction, feature-flag parsing, and update advisory helpers) into `crates/codex/src/version.rs`, preserving existing public API paths for any public helpers (e.g., `update_advisory_from_capabilities`) via re-exports from `lib.rs`.
- Expected files touched:
  - `crates/codex/src/lib.rs` (wire `mod version;` + `pub use ...`; remove moved items)
  - `crates/codex/src/version.rs` (new)
- Acceptance criteria (“done when”):
  - All §4.1 gates pass.
  - No public API path changes (façade + re-exports).
  - Parsing behavior remains unchanged (pure move; tests pass).
  - New module meets §7.3 size policy (target ≤ 300 LOC; may exceed soft if cohesive but must stay ≤ 600).
- Risk: Low–Medium (behavioral regression possible if parsing logic is accidentally edited; keep move mechanical).
- Rollback: Revert module move + re-exports; restore original helper functions in `lib.rs`.

##### P1.13 — Plan remaining Phase 1 seams after P1.12 (no code moves)

Status: [ ] Not Started  [ ] In Progress  [ ] Done  
Last Updated: YYYY-MM-DD

- Goal: After P1.9–P1.12 land, refresh the Phase 1 seam plan based on the then-current `crates/codex/src/lib.rs` structure and remaining top offenders, keeping extraction steps PR-sized and API-stable.
- Expected files touched:
