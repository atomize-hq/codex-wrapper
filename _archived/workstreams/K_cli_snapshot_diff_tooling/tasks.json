[
  {
    "id": "K1-snapshot-schema-and-layout",
    "title": "Define snapshot schema + repo layout",
    "description": "Finalize the snapshot JSON schema (required/optional fields, stable ordering rules) and the on-disk layout under cli_manifests/codex/. Align with ADR 0001 and document supplement + raw_help conventions.",
    "dependencies": [],
    "files": [
      "docs/adr/0001-codex-cli-parity-maintenance.md",
      "cli_manifests/codex/README.md"
    ],
    "outputs": ["Documented snapshot schema and file layout"],
    "status": "todo"
  },
  {
    "id": "K2-implement-snapshot-generator",
    "title": "Implement recursive help crawler",
    "description": "Build a local tool (xtask or small Rust CLI) that crawls codex --help recursively for all commands/subcommands, captures raw help output, and emits cli_manifests/codex/current.json deterministically for a given binary path.",
    "dependencies": ["K1-snapshot-schema-and-layout"],
    "files": [
      "cli_manifests/codex/current.json",
      "cli_manifests/codex/raw_help"
    ],
    "tests": ["cargo test -p codex"],
    "status": "todo"
  },
  {
    "id": "K3-supplement-mechanism",
    "title": "Add explicit help omissions supplement",
    "description": "Add a minimal, explicit supplement mechanism for known help omissions (e.g., platform subcommands not shown in help). Ensure applied supplements are recorded in the snapshot for review visibility.",
    "dependencies": ["K2-implement-snapshot-generator"],
    "files": ["cli_manifests/codex/supplement"],
    "status": "todo"
  },
  {
    "id": "K4-diff-report",
    "title": "Implement human-readable diff report",
    "description": "Add a diff/report mode that compares two snapshots and produces a maintainer-friendly summary (added/removed commands, flags, and notable reorders).",
    "dependencies": ["K2-implement-snapshot-generator"],
    "files": [],
    "status": "todo"
  }
]

