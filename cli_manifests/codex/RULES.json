{
  "rules_schema_version": 1,
  "scope": "codex-cli-parity",
  "identity": {
    "command": "path",
    "flag": "prefer_long_else_short",
    "arg": "name"
  },
  "union": {
    "mode": "union",
    "platform_granularity": "target_triple",
    "require_same_tool": true,
    "require_same_semantic_version": true,
    "required_target": "x86_64-unknown-linux-musl",
    "expected_targets": [
      "x86_64-unknown-linux-musl",
      "aarch64-apple-darwin",
      "x86_64-pc-windows-msvc"
    ],
    "partial_union_policy": {
      "when_required_target_missing": "fail",
      "when_non_required_targets_missing": "emit_union_complete_false",
      "union_fields": [
        "expected_targets",
        "complete",
        "missing_targets"
      ]
    },
    "conflict_handling": {
      "strategy": "record_conflicts_and_preserve_availability",
      "on_conflict": "never_fail",
      "conflict_payload_location": "commands[].conflicts",
      "conflict_entry_shape": {
        "unit": "command|flag|arg",
        "path": "command path tokens",
        "field": "field name that differs",
        "values_by_target": "map target_triple -> scalar JSON value",
        "help_context": "Usage|Options|Arguments|etc (optional)",
        "evidence": {
          "help_ref_by_target": "map target_triple -> relative raw help path (optional)",
          "help_sha256_by_target": "map target_triple -> sha256 of raw help text (optional)"
        },
        "key": "required when unit=flag",
        "name": "required when unit=arg"
      },
      "fields_tracked": {
        "command": [
          "about",
          "usage"
        ],
        "flag": [
          "takes_value",
          "value_name",
          "repeatable"
        ],
        "arg": [
          "required",
          "variadic"
        ]
      }
    },
    "canonical_keys": {
      "flag_key": "long_or_short",
      "flag_key_examples": [
        "--config",
        "-c"
      ]
    },
    "availability": {
      "field": "available_on",
      "meaning": "Set of target triples where this unit appears in help discovery."
    }
  },
  "comparison": {
    "unit_types": [
      "command",
      "flag",
      "arg"
    ],
    "platform_filter_modes": [
      "any",
      "all",
      "exact_target"
    ],
    "surface_deltas": {
      "commands": "presence_by_path",
      "flags": "presence_by_flag_key",
      "args": "presence_by_arg_name"
    },
    "semantic_fields": {
      "flag": [
        "takes_value",
        "value_name",
        "repeatable"
      ],
      "arg": [
        "required",
        "variadic"
      ]
    },
    "non_semantic_metadata_fields": {
      "command": [
        "about",
        "usage"
      ]
    }
  },
  "report": {
    "schema_version": 1,
    "required_deltas": [
      "missing_commands",
      "missing_flags",
      "missing_args"
    ],
    "optional_deltas": [
      "passthrough_candidates",
      "unsupported",
      "intentionally_unsupported"
    ],
    "platform_filter": {
      "modes": [
        "any",
        "all",
        "exact_target"
      ]
    }
  },
  "sorting": {
    "commands": "lexicographic_path",
    "flags": "by_key_then_long_then_short",
    "args": "by_name"
  },
  "validation": {
    "require_root_path_entry": true,
    "require_unique_command_paths": true,
    "require_unique_flag_keys_per_command": true,
    "require_unique_arg_names_per_command": true
  }
}
